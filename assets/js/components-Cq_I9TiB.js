import{j as e,r as a,R as pt}from"./vendor-react-Cx8bjDp6.js";import{u as c,s as Ge,a as gt,b as ze,N as Q,I as pe,H as vt,E as Ie,c as je,d as me,e as fs,f as de,g as xs,r as hs,h as Ve,i as ps,j as yt,C as wt,k as Le,S as Me,l as gs,m as vs,n as ys,o as dt,p as Ue,q as ws,t as ye,v as bs,w as Re,x as bt,y as Xe,z as js,A as Ns,B as He,D as ks,F as Ts,G as be,J as jt,K as Nt,L as kt,M as Tt,O as ut,P as Ss,Q as Cs,R as Es,T as Is,U as St,V as As,W as Ls,X as Ms,Y as Rs,Z as Ct,_ as Je,$ as _s,a0 as Ne,a1 as $s,a2 as we,a3 as _e,a4 as Ke,a5 as Ye,a6 as Bs,a7 as Et,a8 as It,a9 as Ps,aa as At,ab as Fs,ac as Os,ad as Ds,ae as Ws,af as Lt,ag as Mt,ah as Rt,ai as _t,aj as mt,ak as Vs,al as Gs,am as zs,an as xe,ao as he,ap as qe,aq as Us,ar as Xs,as as Hs,at as Js,au as Ks,av as Ys,aw as $t,ax as Bt,ay as Pt,az as qs,aA as Qs,aB as Zs,aC as ft,aD as ea,aE as ta,aF as sa,aG as aa,aH as ge,aI as na,aJ as ia,aK as la,aL as ra,aM as Ft,aN as ca,aO as oa,aP as da,aQ as ua,aR as ma,aS as fa,aT as xa,aU as Ot,aV as Dt,aW as ha,aX as pa,aY as ga,aZ as va,a_ as fe,a$ as ya,b0 as wa,b1 as Ce,b2 as ba,b3 as ja,b4 as Na,b5 as ka,b6 as Ta,b7 as Sa,b8 as Ca,b9 as Ea,ba as Ia,bb as Aa,bc as La,bd as Ma,be as Ra,bf as _a,bg as $a,bh as Ba,bi as Pa,bj as Fa,bk as Oa,bl as Da,bm as Wa,bn as Va,bo as Ga,bp as za,bq as Ua,br as Xa,bs as Ha,bt as Ja,bu as Ka,bv as Ya,bw as qa,bx as Qa,by as Za,bz as en,bA as tn}from"./index-LjUrMrkT.js";import{c as ee}from"./vendor-classnames-5doKaGlr.js";import{I as ke,m as Te}from"./vendor-@mdi-BQwml9cv.js";import{m as O,A as ve}from"./vendor-framer-motion-Cpr_vbZ8.js";import{F as Wt,f as Vt}from"./vendor-@fortawesome-DZeSH7Hy.js";import{F as sn,_ as an}from"./vendor-react-spinners-BNZI7-dq.js";import{F as Gt,a as nn}from"./vendor-react-icons-DuUOwoc5.js";const ln=({navigationInterface:t,activeInterface:r,setActiveInterface:n})=>{const f=c(Ge);let x=c(gt)*10;f!==0&&(x=x*((100+f)/100));const h=c(ze)/x*100,o=()=>h>=96?pe:h>=50?vt:Ie;return e.jsx("div",{className:"text-white flex justify-between gap-2 z-40 px-8 w-full bg-gradient-to-b from-transparent to-black",children:t.map(u=>e.jsxs("div",{className:"flex flex-col items-center justify-center w-20 h-20 relative",onClick:()=>n(u.label),children:[e.jsxs("div",{className:"relative w-35px h-35px mb-1 overflow-visible -mt-1 -mr-1 -ml-1",children:[u.label===r&&e.jsx("div",{className:`absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 translate-y-[-22px] \r
              bg-activeNavElement/30 rounded-theme -mb-2 h-[65px] w-[50px]`}),e.jsx("img",{src:u.label===Q.MILK?o():u.img,alt:u.label,className:`object-contain w-[90px] h-[90px] -translate-y-[10px] ${u.label===Q.MILK?"scale-125":""}`})]}),e.jsx("span",{className:"text-white text-lg -translate-y-[30px]",children:u.label})]},u.label))})},Qe=()=>{const t=c(je),r=c(me),n=c(fs),[f,m]=a.useState(t),x=a.useRef(null),N=de(),[h,o]=a.useState(0),[u,b]=a.useState(0),[k,M]=a.useState(!1),_=()=>{const[S,C]=a.useState(0);return a.useEffect(()=>{const d=setInterval(()=>{C(B=>(B+1)%3)},300);return()=>clearInterval(d)},[]),e.jsxs(e.Fragment,{children:[e.jsx("span",{className:` ${S===0?"":"opacity-30"}`,children:"."}),e.jsx("span",{className:` ${S===1?"":"opacity-30"}`,children:"."}),e.jsx("span",{className:` ${S===2?"":"opacity-30"}`,children:"."})]})};return a.useEffect(()=>{m(t)},[t,f]),a.useEffect(()=>{if(x.current){const S=x.current.getBoundingClientRect();N(xs({x:S.x+S.width/2,y:S.y+S.height/2}))}},[N]),a.useEffect(()=>{if(n&&x.current){x.current.style.animation="coinAnimation 1s ease-out";const S=setTimeout(()=>{x.current&&(x.current.style.animation="none"),N(hs())},1e3);return()=>clearTimeout(S)}},[n,N]),a.useEffect(()=>{(async()=>{M(!0);try{const C=await fetch(`https://tg.catserver-production.com/offline_income/user-milk-info/${r}`);if(!C.ok)throw new Error(`HTTP error! status: ${C.status}`);const d=await C.json();o(d.milk_value),b(d.milk_value_income)}catch(C){console.error("Error getting user milk info:",C)}finally{M(!1)}})()},[r]),e.jsxs("div",{className:"flex flex-col justify-between items-center text-white w-full px-6",style:{fontSize:"1.6rem",color:"white"},children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"flex items-center gap-0.5",children:[e.jsx("div",{className:"flex items-center justify-center h-[1.2rem]",children:e.jsx("img",{src:pe,className:"h-8 w-8 object-contain -mt-1 scale-150",alt:"Milk Icon"})}),e.jsx("div",{className:"flex items-center font-alt",children:k?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"animate-pulse scale-90",children:"Loading"}),e.jsx(_,{})]}):Ve(Math.round(h+u))})]})}),e.jsxs("div",{className:"flex items-center font-alt -mt-3 scale-75",children:[e.jsx("img",{ref:x,src:ps,className:`h-9 w-9 scale-150 ${n?"animate-coinAnimation":""}`,alt:"Balance Icon"}),e.jsx("div",{children:Ve(t)})]})]})},Ae=({userId:t,imgSrc:r,title:n,cost:f,costText:m,className:x,disable:N=!1,disableMessage:h,isClaimed:o,isDone:u,progressPercentage:b,parentName:k,onClick:M,onClaimClick:_,currentLeague:S,id:C,chatId:d})=>{const[B,L]=a.useState(!1),[i,E]=a.useState(!1),R=c(yt),K=R.some(I=>I.id==="chester"&&I.isClaimed),H=R.some(I=>I.id==="chester"),j=async(I,l)=>{if(I&&n&&!n.includes("Like & Retweet in X")&&!n.includes("Follow Catap in X"))try{return(await(await fetch(`https://tg.catserver-production.com/cattg/get_task_status/${I}/${l}`)).json()).status}catch{return!1}else return!1},G=async()=>{if(t&&n&&!n.includes("Like & Retweet in X")&&!n.includes("Follow Catap in X")&&Telegram&&Telegram.WebApp&&d){const I=d.replace("@","");(n="Check project site")?Telegram.WebApp.openLink(d,{try_instant_view:!0}):Telegram.WebApp.openTelegramLink(`https://t.me/${I}`),await fetch("https://tg.catserver-production.com/cattg/set_task_status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t,task_type:n,status:!0})}),setTimeout(async()=>{if(t&&n&&!n.includes("Like & Retweet in X")&&!n.includes("Follow Catap in X")){const l=await j(t,n);L(l)}},1e4)}};a.useEffect(()=>{(async()=>{if(t&&n&&!n.includes("Like & Retweet in X")&&!n.includes("Follow Catap in X")){const l=await j(t,n);L(l)}})()},[t,n]);const Y=async(I,l,T)=>{try{return(await(await fetch(`https://tg.catserver-production.com/cattg/get_task_x_status/${I}/${l}/${T}`)).json()).status}catch{return!1}},V=async()=>{if(Telegram&&Telegram.WebApp&&d&&C!==void 0){let I;if(n.includes("Follow Catap in X"))I="follow";else if(n.includes("Like & Retweet in X"))I="retweet";else return;Telegram.WebApp.openLink(d,{try_instant_view:!0}),await fetch("https://tg.catserver-production.com/cattg/set_task_x_status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t,task_type:I,task_id:C,status:!0})}),setTimeout(async()=>{if(t!=null){const l=await Y(t,C,I);console.log(l),E(l)}},1e4)}};a.useEffect(()=>{const I=async()=>{if(t!=null&&C!==void 0){let l;if(n.includes("Follow Catap in X"))l="follow";else if(n.includes("Like & Retweet in X"))l="retweet";else return;const T=await Y(t,C,l);console.log(T),E(T)}};(n.includes("Follow Catap in X")||n.includes("Like & Retweet in X"))&&I()},[t,n,C]);const v=n==="Play “Tonique App”"||n==="Play “Sercet Ton Project”"||n==="Play “Bee Coin”"||n==="Play “Snap Fly”"||n==="Join “BeamTap Game”"||n==="Boost community"||n==="Deposit at @whale"||n==="Play Crazy Camels"||n==="Gift from cheaters"||n==="Check project site",p=k==="league"&&C&&(S==null?void 0:S.id)&&parseInt(C,10)>parseInt(S.id,10),z=()=>{Telegram&&Telegram.WebApp&&(Telegram.WebApp.openTelegramLink("https://t.me/Catapsbot?start=tasks"),Telegram.WebApp.close())};return d==="@Catapsbot?start=tasks"&&H?null:e.jsxs("div",{className:ee("text-xs flex rounded-theme px-3.5 py-2 flex-1 items-center gap-3 transition-all duration-500 ease-in-out font-alt justify-stretch",x),onClick:M,style:{backgroundColor:"rgba(255, 255, 255, 0.05)",backgroundImage:d==="@Catapsbot?start=tasks"?`url(${wt})`:"none",backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:`flex items-center justify-center ${k==="league"?"":"-ml-8"} h-14 aspect-square`,children:e.jsx("img",{src:r,alt:n,className:`${p?"blur":""} 
          ${n==="Join “BeamTap Game”"?"max-w-[70%]":""} 
          ${n==="Play “Snap Fly”"?"max-w-[90%]":""} 
          ${n==="Play “Sercet Ton Project”"?"max-w-[80%]":""} 
          ${n==="Play “Tonique App”"?"max-w-[80%]":""} 
          ${n!=="Join “BeamTap Game”"&&n!=="Play “Snap Fly”"&&n!=="Play “Sercet Ton Project”"?"max-w-[120%]":""}`})}),e.jsxs("div",{className:"flex justify-between flex-1 flex-col gap-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col items-start flex-1",children:[e.jsx("p",{className:"font-semibold",children:n}),e.jsx("div",{className:"flex",children:d==="@Catapsbot?start=tasks"?e.jsx("span",{className:"text-white/70",children:"This skin can only be obtained through completing event tasks and via the Telegram bot."}):e.jsxs(e.Fragment,{children:[e.jsxs(e.Fragment,{children:[n==="Follow Catap in X and earn $MLK"||n==="Like & Retweet in X and earn $MLK"||n==="Gift from cheaters"?e.jsx("img",{src:pe,className:"h-3.5 mr-0.5 scale-250"}):e.jsx("img",{src:Le,className:"h-3.5 mr-0.5"}),f]}),!n.includes("ROBOCAT")&&m&&e.jsx("span",{className:"text-shuttleGray ml-1",children:m})]})}),N&&e.jsx("p",{className:"text-xs mt-1 text-red-500",children:h})]}),k==="special"?u?e.jsx("button",{className:ee("font-alt font-semibold px-3.5 py-[5px] rounded-full relative opacity-80 hover:opacity-40 transition-colors",{"text-white/50 pointer-events-none bg-white/10":o,"text-white pointer-events-auto active:text-black active:shadow-lg":!o}),style:{background:o?"":"linear-gradient(to right, #F97316, #F59E0B)"},onClick:_,children:"Claim"}):e.jsx(e.Fragment,{children:v?B?e.jsx("button",{className:ee("font-alt font-semibold px-3.5 py-[5px] rounded-full relative opacity-80 hover:opacity-40 transition-colors",{"text-white/50 pointer-events-none bg-white/10":!B,"text-white pointer-events-auto active:text-black active:shadow-lg":B}),style:{background:B?"linear-gradient(to right, #F97316, #F59E0B)":""},onClick:_,children:"Claim"}):e.jsx("button",{className:"font-alt font-semibold px-3.5 py-[5px] rounded-full relative opacity-80 transition-colors text-white pointer-events-auto active:text-black active:shadow-lg",style:{background:"linear-gradient(to right, #F97316, #F59E0B)"},onClick:G,children:"GO"}):C=="16"||C=="17"||C=="5"||C=="6"?i?e.jsx("button",{className:ee("font-alt font-semibold px-3.5 py-[5px] rounded-full relative opacity-80 hover:opacity-40 transition-colors",{"text-white/50 pointer-events-none bg-white/10":!i,"text-white pointer-events-auto active:text-black active:shadow-lg":i}),style:{background:i?"linear-gradient(to right, #F97316, #F59E0B)":""},onClick:_,children:"Claim"}):e.jsx("button",{className:"font-alt font-semibold px-3.5 py-[5px] rounded-full relative opacity-80 transition-colors text-white pointer-events-auto active:text-black active:shadow-lg",style:{background:"linear-gradient(to right, #F97316, #F59E0B)"},onClick:V,children:"GO"}):K?e.jsx("button",{className:"font-alt font-semibold px-3.5 py-[5px] rounded-full relative opacity-80 hover:opacity-40 transition-colors text-white pointer-events-auto active:text-black active:shadow-lg",style:{background:"linear-gradient(to right, #F97316, #F59E0B)"},onClick:()=>{if(Telegram&&Telegram.WebApp&&d!==void 0)if(d.startsWith("http"))Telegram.WebApp.openLink(d,{try_instant_view:!1});else{const I=d.replace("@","");Telegram.WebApp.openTelegramLink(`https://t.me/${I}`)}},children:d?d.startsWith("http")?"Open":"Join":"Go"}):e.jsx("button",{className:"font-alt font-semibold px-3.5 py-[5px] rounded-full relative opacity-80 hover:opacity-40 transition-colors text-white pointer-events-auto active:text-black active:shadow-lg",style:{background:"linear-gradient(to right, #F97316, #F59E0B)"},onClick:z,children:"GO"})}):_?e.jsx("button",{className:ee("font-alt font-semibold px-3.5 py-[5px] rounded-full relative opacity-80 hover:opacity-40 transition-colors",{"text-white/50 pointer-events-none bg-white/10":!u||o,"text-white pointer-events-auto active:text-black active:shadow-lg":u&&!o}),style:{background:u&&!o?"linear-gradient(to right, #F97316, #F59E0B)":""},onClick:_,children:"Claim"}):e.jsx(Me,{className:"right-0"})]}),b&&e.jsx("div",{className:"w-full bg-black/30 rounded-full border-2 border-black/30",children:e.jsx("div",{className:"bg-orange-400 h-1 rounded-full bg-gradient-to-r from-orange-400 via-amber-300 to-orange-400 transition-all",style:{width:`${b>100?100:b}%`}})})]})]},n)},zt=({isVisible:t,onClose:r,onUpgrade:n,title:f,description:m,cost:x,count:N,total:h,imgSrc:o})=>{if(!t)return null;const u={hidden:{opacity:0,y:"100%"},visible:{opacity:1,y:"0%"},exit:{opacity:0,y:"-100%"}};return e.jsxs(O.div,{className:"fixed text-white inset-0 flex items-end justify-center z-50 backdrop-blur-sm font-alt",initial:"hidden",animate:"visible",exit:"exit",variants:u,children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-[0.4] "}),e.jsxs("div",{className:"w-full rounded-lg p-8 relative z-10 flex flex-col items-center",style:{backgroundColor:"rgba(229, 231, 235, 0.1)"},children:[e.jsx("button",{className:"absolute top-2 right-2 text-white bg-transparent hover:bg-gray-600 text-2xl rounded-full p-1",onClick:r,children:e.jsx(O.div,{whileHover:{scale:1.1},children:e.jsx(ke,{path:Te,size:1})})}),e.jsx("div",{className:"w-full h-1/2 flex items-center justify-center",children:e.jsx("img",{src:o,alt:f,className:"object-contain w-32 h-32 rounded-full"})}),e.jsx("h2",{className:"text-center text-xl font-bold mb-4",children:f==="White List"?"NFT WHITELIST SLOT":f}),e.jsx("p",{className:"text-center text-base mb-4 text-white/60",dangerouslySetInnerHTML:{__html:m}}),x!==void 0?e.jsxs("div",{className:"flex justify-center items-center mb-4",children:[e.jsx("img",{src:f==="White List"?pe:Le,className:`h-3.5 mr-0.5 ${f==="White List"?"scale-250 -mt-1":""}`}),e.jsx("span",{children:x})]}):e.jsxs("div",{className:"text-center text-base mb-4",children:[N,"/",h]}),e.jsx("button",{className:"w-full text-white font-alt py-2 px-4 rounded-full relative opacity-80 hover:opacity-40",style:{background:"linear-gradient(to right, #F97316, #F59E0B)"},onClick:()=>{n(),r()},children:f==="White List"||f.includes("ROBOCAT")?"BUY":f==="FULL CAT"||f==="EXTRA"?"LFG":"UPGRADE"})]})]})},xt=({id:t,name:r,description:n,cost:f,frensCount:m,isClaimed:x,isSelected:N,imageSrc:h,balance:o,referrals:u,onBuy:b,onSelect:k})=>{const[M,_]=a.useState(!1),S=f!=null&&o>=f,C=m!=null&&u>=m,d=()=>{f!=null?_(!0):b(t,f,m)},B=()=>{b(t,f,m),_(!1)},L=()=>{_(!1)},i={hidden:{opacity:0,y:"100%"},visible:{opacity:1,y:"0%"},exit:{opacity:0,y:"-100%"}},E=t==="chester"?x?vs:wt:void 0;return e.jsxs("div",{className:ee("text-xs flex rounded-theme px-3.5 py-2 flex-1 items-center bg-white/5 gap-3 transition-all duration-500 ease-in-out font-alt justify-stretch",{"bg-white/10":N}),style:{backgroundImage:t==="chester"?`url(${E})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"flex items-center justify-center h-14 aspect-square",children:t==="chester"&&!x?e.jsx("img",{src:gs,alt:r,className:"max-w-[150%]"}):e.jsx("img",{src:h,alt:r,className:"max-w-[100%]"})}),e.jsx("div",{className:"flex justify-between flex-1 flex-col gap-1 text-white/50 text-sl",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col items-start flex-1",children:[e.jsx("p",{className:"font-semibold text-white",children:r}),e.jsx("p",{className:"text-white/50",children:n}),e.jsx("div",{className:"flex",children:t==="chester"?e.jsx("span",{className:"text-white/70",children:"This skin can only be obtained through completing event tasks and via the Telegram bot."}):e.jsxs(e.Fragment,{children:[f!=null&&e.jsxs("span",{className:"text-white/70",children:["Cost: ",f]}),m!=null&&e.jsxs("span",{className:"text-white/70",children:["Frens: ",m]})]})})]}),e.jsx("div",{className:"flex flex-col items-end",children:x?e.jsx("button",{className:ee("font-alt font-semibold px-3.5 py-[5px] rounded-full relative opacity-80 transition-colors",{"text-white/50 pointer-events-none bg-white/10":N,"text-white pointer-events-auto active:text-black active:shadow-lg":!N}),style:{background:N?"":"linear-gradient(to right, #F97316, #F59E0B)"},onClick:()=>k(t),children:N?"Selected":"Select"}):e.jsx(e.Fragment,{children:t==="chester"?e.jsx("button",{className:ee("font-alt font-semibold px-3.5 py-[5px] rounded-full relative opacity-80 hover:opacity-40 transition-colors text-white pointer-events-auto active:text-black active:shadow-lg",{"bg-gray-500 cursor-not-allowed":!S&&!C}),style:{background:S||C?"linear-gradient(to right, #F97316, #F59E0B)":""},onClick:()=>{Telegram&&Telegram.WebApp&&(Telegram.WebApp.openTelegramLink("https://t.me/Catapsbot?start=tasks"),Telegram.WebApp.close())},children:"Go"}):e.jsxs(e.Fragment,{children:[m!=null&&u<m?e.jsxs("button",{className:"font-alt font-semibold px-3.5 py-[5px] rounded-full relative opacity-80 hover:opacity-40 transition-colors text-white pointer-events-auto active:text-black active:shadow-lg bg-gray-500",disabled:!0,children:[u,"/",m]}):e.jsx("button",{className:ee("font-alt font-semibold px-3.5 py-[5px] rounded-full relative opacity-80 hover:opacity-40 transition-colors text-white pointer-events-auto active:text-black active:shadow-lg",{"bg-gray-500 cursor-not-allowed":!S&&!C}),style:{background:S||C?"linear-gradient(to right, #F97316, #F59E0B)":""},onClick:d,disabled:!S&&!C,children:"Buy"}),e.jsx(ve,{children:M&&e.jsxs(O.div,{className:"fixed text-white inset-0 flex items-end justify-center z-50 backdrop-blur-sm font-alt",initial:"hidden",animate:"visible",exit:"exit",variants:i,children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-[0.4]"}),e.jsxs("div",{className:"w-full rounded-lg p-8 relative z-10 flex flex-col items-center",style:{backgroundColor:"rgba(229, 231, 235, 0.1)"},children:[e.jsx("button",{className:"absolute top-2 right-2 text-white bg-transparent hover:bg-gray-600 text-2xl rounded-full p-1",onClick:L,children:e.jsx(O.div,{whileHover:{scale:1.1},children:e.jsx(ke,{path:Te,size:1})})}),e.jsx("h2",{className:"text-center text-2xl font-bold mb-4",children:"Confirm Purchase"}),e.jsxs("p",{className:"text-center text-base mb-4 text-white/60",children:["Are you sure you want to buy this skin for ",f," coins?"]}),e.jsxs("div",{className:"flex justify-center gap-4 mt-auto",children:[e.jsx("button",{className:"text-white font-alt py-2 px-4 rounded-full relative opacity-80 hover:opacity-40",style:{background:"linear-gradient(to right, #F97316, #F59E0B)"},onClick:B,children:"Confirm"}),e.jsx("button",{className:"text-white font-alt py-2 px-4 rounded-full relative opacity-80 hover:opacity-40 bg-gray-500",onClick:L,children:"Cancel"})]})]})]})})]})})})]})})]},t)},rn=()=>{const t=de(),r=c(me),n=c(yt),f=c(je),m=c(ys),x=(o,u,b)=>{n.find(M=>M.id===o)&&(u!=null&&f>=u?(t(dt(o)),t(Ue(u))):b!=null&&m>=b&&t(dt(o)))},N=async o=>{await(async()=>{try{const k=await fetch("https://tg.catserver-production.com/api/select_skin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:r,skin_id:o})});if(!k.ok){const M=await k.json();return console.error(`Failed to select skin: ${M.detail||k.statusText}`),!0}return!1}catch(k){return console.error(k),!0}})()||t(ws(o))},h=[...n].sort(o=>o.id==="chester"?-1:1);return e.jsxs("div",{className:"font-alt mt-1",children:[e.jsx("div",{className:"mt-2 text-left",children:"Skins:"}),e.jsx("div",{className:"flex gap-2 flex-col",children:h.map(o=>e.jsxs(pt.Fragment,{children:[o.id==="chester"&&o.isClaimed&&e.jsx(xt,{id:o.id,name:o.name,description:o.description||"",cost:o.cost,frensCount:o.frensCount,isClaimed:!0,isSelected:o.isSelected,imageSrc:o.imageSrc||"",balance:f,referrals:m,onBuy:x,onSelect:N}),!o.id.includes("chester")&&e.jsx(xt,{id:o.id,name:o.name,description:o.description||"",cost:o.cost,frensCount:o.frensCount,isClaimed:o.isClaimed,isSelected:o.isSelected,imageSrc:o.imageSrc||"",balance:f,referrals:m,onBuy:x,onSelect:N})]},o.id))})]})},cn={BOOSTERS:"Boosters",SKINS:"Skins"},on=({setActiveInterface:t})=>{const r=de(),n=c(me),f=c(ye),m=c(bs),x=c(Re),N=c(bt),h=c(je),o=c(gt),[u,b]=a.useState(null),k=c(Xe),[M,_]=a.useState(null),[S,C]=a.useState("BOOSTERS"),[d,B]=a.useState(null),L=c(js),i=c(Ns),[E,R]=a.useState(0),[K,H]=a.useState(0);a.useEffect(()=>{(async()=>{try{const T=await fetch(`https://tg.catserver-production.com/offline_income/user-milk-info/${n}`);if(!T.ok)throw new Error(`HTTP error! status: ${T.status}`);const q=await T.json();R(q.milk_value),H(q.milk_value_income)}catch(T){console.error("Error getting user milk info:",T)}finally{}})()},[n]),a.useEffect(()=>{(async()=>{try{const T=await fetch("https://tg.catserver-production.com/offline_income/time-until-booster-update");if(!T.ok)throw new Error("Network response was not ok");const q=await T.json();B(q.total_seconds)}catch(T){console.error("Error fetching time:",T)}})()},[]),a.useEffect(()=>{let l=null;return d!==null&&d>0&&(l=setInterval(()=>{B(T=>T!==null&&T>1?T-1:0)},1e3)),()=>{l!==null&&clearInterval(l)}},[d]);const j=l=>{if(l===null)return"Loading...";const T=Math.floor(l/3600),q=Math.floor(l%3600/60),A=l%60;return`${T.toString().padStart(2,"0")}:${q.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}`},G=()=>{setTimeout(()=>{r(be(!1))},500)},Y=l=>l.title==="MULTIPAW"||l.title==="STAMINA LIMIT"?l.level===30?"Max Level Reached":"":l.title==="STAMINA SPEED"&&l.level===10?"Max Level Reached":"",V=l=>l.title==="MULTIPAW"||l.title==="STAMINA LIMIT"?l.level===30:l.title==="STAMINA SPEED"?l.level===10:!1,v=async l=>{if(!V(l)){if(_(l),r(be(!0)),await(async()=>{try{const A=await fetch("https://tg.catserver-production.com/api/activate_booster",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:n,booster_name:l.title})});if(!A.ok){const te=await A.json();return console.error(`Failed to activate booster: ${te.detail||A.statusText}`),!0}return!1}catch(A){return console.error(A),!0}})())return;if(l.title.includes("ROBOCAT")){let A;l.title==="ROBOCAT"?A=4:l.title==="ROBOCAT1"?A=8:l.title==="ROBOCAT2"?A=12:A=0,r(jt(A*3600)),r(Nt(l.title)),r(kt())}l.title==="FULL CAT"?(r(Tt(o)),r(ut(l.title))):l.title==="EXTRA"?x||(r(ut(l.title)),r(Ss(300)),r(Cs()),setTimeout(async()=>{r(Es());try{const A=await fetch(`https://tg.catserver-production.com/api/deactivate_extra/${n}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!A.ok){const ne=await A.json();throw console.error(`Failed to activate booster: ${ne.detail||A.statusText}`),new Error("Failed to deactivate EXTRA booster")}const te=await A.json();console.log("Booster deactivated successfully",te)}catch(A){console.error("Error deactivating EXTRA booster:",A)}},5*60*1e3)):(r(Is(l.title)),b(l.title),setTimeout(()=>b(null),500))}(l.title==="EXTRA"||l.title==="FULL CAT"||l.title.includes("ROBOCAT"))&&t(Q.TAP),l.cost!==void 0&&r(Ue(l.cost))},p=m.find(l=>l.title==="EXTRA")||{title:"EXTRA",img:"",count:0,total:0},z=c(He);a.useEffect(()=>{},[z]);const I=async()=>{if(i||E+K<L.cost||await(async()=>{try{const A=await fetch(`https://tg.catserver-production.com/api/activate_wait_list/${n}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!A.ok){const te=await A.json();return console.error(`Failed to purchase White List: ${te.detail||A.statusText}`),!0}return!1}catch(A){return console.error("Error during White List purchase:",A),!0}})())return;const q=E-L.cost;R(q),r(St(!0))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-white w-full flex flex-col overflow-y-scroll flex-1 px-6 py-2",children:[M&&e.jsx(zt,{isVisible:N,onClose:G,onUpgrade:()=>{M.title==="White List"?I():v(M)},title:M.title,description:M.description||"",cost:M.cost,count:M.count,total:M.total,imgSrc:M.img||""}),e.jsxs("div",{className:"border-b border-white/20 ",children:[e.jsx("div",{className:"text-sl font-alt text-white/50 text-center ",children:"Your Total Balance:"}),e.jsx(Qe,{})]}),e.jsx("div",{className:"flex gap-1 p-[5px] mb-2 rounded-theme border border-white/20 mt-2",children:Object.entries(cn).map(([l,T])=>e.jsxs("button",{className:ee("flex-1 font-alt font-normal rounded-[5px] py-2.5 relative flex items-center justify-center gap-2",{"bg-white/10":l===S}),onClick:()=>C(l),children:[e.jsx("img",{src:l==="BOOSTERS"?ks:Ts,alt:T,className:"max-w-[20%] object-contain"}),e.jsx("span",{children:T})]},l))}),S==="BOOSTERS"&&e.jsxs("div",{id:"scrollableDiv",className:"overflow-y-scroll scroll-auto",style:{overflow:"visible"},children:[e.jsxs("div",{className:"font-alt",children:[e.jsx("div",{className:"mt-2 text-base mb-2 text-left",children:"Your RoboCats:"}),e.jsx("div",{className:"flex flex-wrap w-full gap-3 justify-start",children:f.filter(l=>l.title.includes("ROBOCAT")).map(l=>e.jsxs("div",{className:`text-xs flex gap-1 py-2 rounded-theme px-3.5 flex-1 items-center bg-white/5 transition-all 
                    duration-500 ease-in-out ${V(l)||(l.cost??0)>h||k!==0?"cursor-not-allowed opacity-50":"cursor-pointer hover:bg-white/10"}`,onClick:()=>{!V(l)&&(l.cost??0)<=h&&k===0&&(_(l),r(be(!0)))},children:[e.jsx("div",{className:"relative ml-[-32px] w-[60px] h-[40px] overflow-visible",children:e.jsx("img",{src:l.img,alt:l.title,className:`object-contain w-[60px] h-[60px] -translate-y-[10px] scale-90 ${V(l)||(l.cost??0)>h?"opacity-50":""}`})}),e.jsxs("div",{className:"text-start text",children:[e.jsx("p",{className:V(l)||(l.cost??0)>h?"opacity-50":"",children:l.title==="ROBOCAT"?"Default":l.title==="ROBOCAT1"?"Silver":l.title==="ROBOCAT2"?"Gold":l.title}),e.jsxs("div",{className:"text-grey-300 flex",children:[e.jsx("img",{src:Le,className:"h-3.5 mr-0.5"})," ",l.cost]})]})]},l.title))})]}),e.jsxs("div",{className:"font-alt",children:[e.jsx("div",{className:"mt-2 text-base mb-2 text-left",children:"Boosters:"}),e.jsxs("div",{className:"flex gap-2 flex-col",children:[e.jsxs("div",{className:ee("text-xs flex gap-2 py-2 rounded-theme px-3.5 flex-1 items-center bg-white/5 transition-all duration-500 ease-in-out",p.count===0?"cursor-not-allowed":"cursor-pointer hover:bg-white/10"),onClick:()=>{p.title==="EXTRA"&&p.count!==void 0&&p.count>0&&(_(p),r(be(!0)))},children:[e.jsx("div",{className:"relative ml-[-32px] w-[80px] h-[60px] overflow-visible",children:e.jsx("img",{src:p.img,alt:"EXTRA",className:ee("object-contain","w-[60px] h-[60px] -translate-y-[10px] scale-150",p.count===0?"opacity-50":"")})}),e.jsxs("div",{className:"text-start text",children:[e.jsx("p",{className:p.count===0?"opacity-50":"",children:"EXTRA"}),e.jsx("div",{className:p.title==="EXTRA"?"text-grey-300":"",children:p.count===0?e.jsx("span",{className:"text-white",children:j(d)}):e.jsx("span",{className:p.count===0?"opacity-50":"",children:`${p.count}/${p.total}`})})]}),e.jsx(Me,{className:"absolute right-9"})]},"EXTRA"),f.filter(l=>!l.title.includes("ROBOCAT")&&l.title!="STAMINA SPEED").map(l=>e.jsx(Ae,{imgSrc:l.img||"",title:l.title,cost:l.cost??0,onClick:()=>{!V(l)&&(l.cost??0)<=h&&(_(l),r(be(!0)))},className:ee(V(l)||(l.cost??0)>h?"opacity-50 cursor-not-allowed":"cursor-pointer hover:bg-white/20",u===l.title?"bg-white/30":""),disable:V(l)||(l.cost??0)>h,disableMessage:V(l)?Y(l):"Not enough balance",costText:`| Level: ${l.level}`},l.title))]})]})]}),S==="SKINS"&&e.jsx("div",{id:"scrollableDiv5",className:"overflow-y-scroll",children:e.jsx(rn,{})})]})})},Ee=[{id:1,video:As,text:"Story 1"},{id:2,video:Ls,text:"Story 2"},{id:3,video:Ms,text:"Story 3"},{id:4,video:Rs,text:"Story 4"}],dn=({setIsStoryVisible:t})=>{const[r,n]=a.useState(0),[f,m]=a.useState(0),[x,N]=a.useState(!0),h=a.useRef(null),o=a.useRef(!1),u=a.useRef(!1);a.useEffect(()=>{const L=h.current;if(L){const i=()=>{m(L.currentTime/L.duration*100)};return L.addEventListener("timeupdate",i),L.addEventListener("ended",k),()=>{L.removeEventListener("timeupdate",i),L.removeEventListener("ended",k)}}},[r]),a.useEffect(()=>{h.current&&u.current&&h.current.play().catch(L=>{console.log("Auto-play prevented:",L)})},[r]);const b=()=>{u.current||(u.current=!0,h.current&&h.current.play().catch(L=>{console.log("Auto-play prevented:",L)}))};a.useEffect(()=>(window.addEventListener("click",b,{once:!0}),window.addEventListener("touchstart",b,{once:!0}),()=>{window.removeEventListener("click",b),window.removeEventListener("touchstart",b)}),[]);const k=()=>{r+1<Ee.length?n(L=>L+1):(N(!1),t(!1))},M=()=>{r-1>=0?n(L=>L-1):n(Ee.length-1)},_=L=>{let i;"clientX"in L?i=L.clientX/window.innerWidth:i=L.touches[0].clientX/window.innerWidth,i<.3?M():k()},S=()=>{h.current&&!o.current&&(h.current.pause(),o.current=!0)},C=()=>{h.current&&o.current&&(h.current.play().catch(L=>{console.log("Play request interrupted :",L)}),o.current=!1)},d=()=>{S()},B=()=>{C()};return x?e.jsxs("div",{className:"relative h-screen w-full bg-gray-900",onClick:_,onMouseDown:S,onMouseUp:C,onTouchStart:d,onTouchEnd:B,children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 flex justify-between px-2 py-1 z-20",children:Ee.map((L,i)=>e.jsx("div",{className:"h-1 bg-gray-600 flex-grow mx-1 relative rounded",children:e.jsx("div",{className:"absolute h-full bg-white rounded transition-all",style:{width:r===i?`${f}%`:r>i?"100%":"0%"}})},i))}),e.jsx("video",{ref:h,src:Ee[r].video,className:"w-full h-full object-cover",playsInline:!0,muted:!0}),e.jsx("button",{className:"absolute top-2 right-2 text-white bg-transparent hover:bg-gray-600 text-2xl rounded-full p-1",onClick:()=>{N(!1),t(!1)},children:e.jsx(O.div,{whileHover:{scale:1.1},children:e.jsx(ke,{path:Te,size:1})})})]}):null},un=({setActiveInterface:t})=>{const r=de(),n=c(He),f=c(Ct),m=c(Je),x=f+m>=50,N=c(_s),h=c(Re),o=c(ye),u=c(Ne),b=o.find(P=>P.title==="MULTIPAW"),k=b?b.level:0,M=c($s),_=a.useRef(null),S=a.useRef(null),[C,d]=a.useState(!1),[B,L]=a.useState(0),[i,E]=a.useState(!0),[R,K]=a.useState({width:0,height:0}),[H,j]=a.useState([]),G=a.useRef([]),Y=c(we),V=Y.findIndex(P=>u<P.cost),v=V===-1?Y.length-1:V-1,[p,z]=a.useState(Y[v]||null),I=c(_e),l=c(Ke),T=c(Ye),q=()=>{Telegram&&Telegram.WebApp&&(Telegram.WebApp.openTelegramLink("https://t.me/Catapsbot?start=join"),Telegram.WebApp.close())};a.useEffect(()=>{const P=Y.findIndex(U=>u<U.cost),F=P===-1?Y.length-1:P-1,ae=Y[F]||null;if(ae)z(ae);else{const U=Y.reduce((ce,oe)=>ce.cost>oe.cost?ce:oe);z(U)}},[u,Y]),a.useEffect(()=>{S.current&&K({width:S.current.clientWidth,height:S.current.clientHeight})},[]),a.useEffect(()=>{const P=_.current;if(!P)return;const F=P.getContext("2d");if(!F)return;const ae=()=>{F.clearRect(0,0,P.width,P.height),H.forEach((U,ce)=>{F.fillStyle=`rgba(255, 255, 255, ${U.opacity})`,F.font='bold 48px "Potato Sans"',F.fillText(U.value,U.x,U.y),U.opacity>0?(U.opacity-=.01,U.x+=(U.targetX-U.x)*.01,U.y+=(U.targetY-U.y)*.01):H.splice(ce,1)}),G.current=H.length?[requestAnimationFrame(ae)]:[]};return ae(),()=>{G.current.forEach(U=>cancelAnimationFrame(U))}},[H]),a.useEffect(()=>{k!==void 0&&E(M-k>=0)},[M,k]),a.useEffect(()=>{let P=500,F=1e4,ae=5;if(h&&(P=125),n||h){const U=setInterval(()=>{te()},P),ce=setTimeout(()=>{L(ae)},F);return()=>{clearInterval(U),clearTimeout(ce)}}},[n,h]);const A=()=>{if(!I)return{level:0,incrementValue:0};const{clickValue:P}=I.bonus||{clickValue:0};let F=k||0;P==="double"?F*=2:P==="triple"?F*=3:F+=P;let ae=F;return h&&(ae*=4),{level:ae}},te=()=>{const P=A();if(P){const{level:F}=P;if(r(Bs()),S.current!==null&&F!==void 0){const ae=S.current.getBoundingClientRect(),U=ae.width/2,ce=ae.height/2,oe=3*16,$e=(Math.random()-.5)*2*oe,Be=(Math.random()-.5)*3*oe,Pe=U+$e,Se=ce+Be,Fe={value:F.toString(),x:Pe,y:Se,targetX:N.x,targetY:0-S.current.clientWidth/5,opacity:1};j(Oe=>[...Oe,Fe])}C||d(!0)}},ne={position:"absolute",bottom:"-15rem",left:"calc(0% - 18rem)",width:"800px",height:"800px"},w={width:"800px",height:"800px",userSelect:"none",MozUserSelect:"none",msUserSelect:"none"},W=c(Et),D=o.find(P=>P.title===W),[se]=a.useState(D==null?void 0:D.gifImg),ie=()=>{if(h){if(B==5)return e.jsx("div",{style:ne,children:e.jsx("img",{src:Os,className:"fade-in",alt:"Animated Cat wait",style:w})});if(B!=5)return e.jsx("div",{style:ne,children:e.jsx("img",{src:Ds,className:"fade-in",alt:"Animated Cat tap",style:w})})}else{if(n&&B==5)return e.jsx("div",{style:ne,children:e.jsx("img",{src:I==null?void 0:I.gifIdle,className:"fade-in",alt:"Animated Cat wait",style:w})});if(n){if(n&&B!=5)return e.jsx("div",{style:ne,children:e.jsx("img",{src:I==null?void 0:I.gifTap,className:"fade-in",alt:"Animated Cat tap",style:w})})}else return e.jsx("div",{style:ne,children:e.jsx("img",{src:I==null?void 0:I.gifWait,className:"fade-in",alt:"Animated Cat idle",style:w})})}},le=()=>{$(!0)},re=c(It),[J,$]=a.useState(!1),y=()=>{if(!re)return null;const P=new Date(re),F=P.getUTCHours(),ae=P.getUTCMinutes(),U=14,oe=F<U||F===U&&ae<51;return e.jsx(O.div,{className:"absolute top-3 left-3 z-50 cursor-pointer flex justify-center items-center w-8 h-8 rounded-full",onClick:le,style:{width:"30px",height:"30px",position:"absolute",border:"1px solid grey"},initial:{opacity:1},animate:{opacity:oe?[.5,1,.5]:[1,1,1]},transition:{duration:2,repeat:1/0,repeatType:"loop"},children:e.jsx("div",{className:"flex justify-center items-center w-full h-full rounded-full ",children:e.jsx(Wt,{icon:Vt,style:{margin:"auto",display:"block",color:"grey"}})})})};return e.jsx(e.Fragment,{children:e.jsx("div",{ref:S,className:"flex-1 relative ",children:J?e.jsx(dn,{setIsStoryVisible:$}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{}),l!=="0"&&e.jsxs(e.Fragment,{children:["                ",e.jsx("div",{className:"absolute top-2 right-16 z-40 ",style:{transform:" translateY(-25px)",scale:"0.35"},children:e.jsx(sn,{color:"#ffffff",loading:!0,height:12,width:2,radius:1,margin:.1})}),e.jsx("div",{className:"absolute top-2 right-2 bg-gray-500/20  rounded-[1rem] z-40 px-4 py-2 font-alt ",style:{border:"1px solid black"},children:e.jsxs("p",{className:"text-xs text-white z-20 ",children:[l.slice(0,8),"..."]})}),e.jsx("div",{className:"absolute top-8 right-1 text-xs text-white z-40 px-2 py-2 font-alt scale-75",children:"Wait for results"})]}),!x&&e.jsx("div",{className:"absolute top-20 right-6 z-30 scale-150",children:e.jsx("div",{className:"cursor-pointer",onClick:q,children:e.jsx("img",{src:Ps,alt:"Partners Icon",className:"h-16"})})}),"              ",l=="0"&&!T&&e.jsx("div",{className:"absolute top-24 left-6 z-30 scale-150 mb-4",children:e.jsx("div",{className:"cursor-pointer",onClick:()=>t(Q.Raffle),children:e.jsx("img",{src:At,alt:"Partners Icon",className:"h-16"})})}),y(),e.jsx("canvas",{className:"absolute top-0 left-0 z-50 pointer-events-none",ref:_,width:R.width,height:R.height}),e.jsxs("div",{className:"z-40 relative text-sl text-white/50 font-alt text-center flex items-center justify-center gap-2 -mt-3",onClick:()=>t(Q.LEAGUE_DETAILS),children:[e.jsx("img",{src:p==null?void 0:p.imgWeb,className:"h-8 scale-150",onError:P=>{console.error("Ошибка загрузки изображения:",P)}}),p==null?void 0:p.title," ",e.jsx(Me,{})]}),e.jsxs("div",{children:[e.jsxs("div",{className:`z-30 ${i?"":"pointer-events-none"}`,children:["            ",ie()]}),!n&&e.jsx(O.button,{className:"absolute right-[33%] top-[95%] transform -translate-y-1/2 z-40 flex items-center justify-center mb-1 -mt-1 rounded-[1rem] font-alt font-semibold text-2xl bg-gradient-to-r from-[#a8e063] to-[#56ab2f] text-white active:text-black active:shadow-lg",style:{width:"30%",height:"35px",boxShadow:"2px 3px 1px #5d5855",border:"1px solid black"},onClick:()=>t(Q.BOOST),children:e.jsx(O.span,{className:"text-xl text-white",animate:{scale:[1,1.1,1],opacity:[.8,1,.8]},transition:{duration:.6,repeat:1/0,ease:"easeInOut"},children:"LETS FARM"})})]}),n&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center -mt-12 ml-12 scale-150 pointer-events-none",children:e.jsxs("div",{className:"relative flex items-center justify-center w-64 h-64",children:[e.jsx("img",{src:Fs,alt:"Shade Cat",className:"absolute w-64 h-64 pointer-events-none scale-150",style:{zIndex:1}}),e.jsx(O.img,{src:se,alt:"Robot Animation",className:"w-64 h-64 pointer-events-none z-50",animate:{rotate:["0deg","-10deg","0deg","10deg","0deg"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]})})]})})})},Ut=({isVisible:t,onClose:r,title:n,message:f})=>{const m={hidden:{opacity:0,y:"100%"},visible:{opacity:1,y:"0%"},exit:{opacity:0,y:"-100%"}};return e.jsx(ve,{children:t&&e.jsxs(O.div,{className:"fixed text-white inset-0 flex items-center justify-center z-50 backdrop-blur-sm font-alt",initial:"hidden",animate:"visible",exit:"exit",variants:m,children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-[0.4]"}),e.jsxs("div",{className:"w-3/5 h-3/5 rounded-lg p-8 relative z-10 flex flex-col items-center",style:{backgroundColor:"rgba(229, 231, 235, 0.1)"},children:[e.jsx("button",{className:"absolute top-2 right-2 text-white bg-transparent hover:bg-gray-600 text-2xl rounded-full p-1",onClick:r,children:e.jsx(O.div,{whileHover:{scale:1.1},children:e.jsx(ke,{path:Te,size:1})})}),e.jsx("h2",{className:"text-center text-2xl font-bold mb-4",children:n}),e.jsx("p",{className:"text-center text-base mb-4 text-white/60",children:f}),n==="Coming Soon!"?e.jsx("button",{className:"w-full text-white font-alt py-2 px-4 rounded-full relative opacity-80 hover:opacity-40",style:{background:"linear-gradient(to right, #F97316, #F59E0B)",marginTop:"auto"},onClick:()=>{Telegram&&Telegram.WebApp&&Telegram.WebApp.openTelegramLink("https://t.me/catapcommunity")},children:"Subscribe"}):e.jsx("button",{className:"w-full text-white font-alt py-2 px-4 rounded-full relative opacity-80 hover:opacity-40",style:{background:"linear-gradient(to right, #F97316, #F59E0B)",marginTop:"auto"},onClick:r,children:"Got it"})]})]})})},mn={MILK_STATS:"My Milk",MILK_BOOSTERS:"Milk Boosters"},fn=()=>{const[t,r]=a.useState(0);return a.useEffect(()=>{const n=setInterval(()=>{r(f=>(f+1)%3)},300);return()=>clearInterval(n)},[]),e.jsxs(e.Fragment,{children:[e.jsx("span",{className:` ${t===0?"":"opacity-30"}`,children:"."}),e.jsx("span",{className:` ${t===1?"":"opacity-30"}`,children:"."}),e.jsx("span",{className:` ${t===2?"":"opacity-30"}`,children:"."})]})},xn=()=>{const t=de(),r=c(Ws),n=c(ye),f=c(_e),m=n.find(s=>s.title==="STAMINA LIMIT"),[x,N]=a.useState(null),h=c(Ge),o=()=>{if(!f)return 0;if((m==null?void 0:m.level)!=null){const{energy:s}=f.bonus||{energy:0};let X=(m==null?void 0:m.level)*500+500||0;return s=="double"?X*=2:s=="triple"?X*=3:X+=s,X}else return 5e3},u=o();let b=5e3;h!==0&&(b=u*10*((100+h)/100));const k=c(Lt),M=c(Mt),[_,S]=a.useState(M),[C,d]=a.useState(!1),[B,L]=a.useState("MILK_STATS"),i=c(me),[E,R]=a.useState(""),K=c(ze),H=K/b*100,j=c(Rt),G=c(_t),[Y,V]=a.useState(mt),v=c(Re),[p,z]=a.useState(!1),[I,l]=a.useState(!1),[T,q]=a.useState(!1),A=r.find(s=>s.title==="SIZE OF CUP"),te=r.find(s=>s.title==="SHARE OF TAP"),ne=r.find(s=>s.title==="Delivery speed"),w=c(je),W=n.find(s=>s.title==="MULTIPAW"),[D,se]=a.useState(0),[ie,le]=a.useState(null),[re,J]=a.useState(null),[$,y]=a.useState(!1),[P,F]=a.useState(0),[ae,U]=a.useState(0),oe=(()=>{if(!f)return 0;const{clickValue:s}=f.bonus||{clickValue:0};let g=(W==null?void 0:W.level)||0;return s==="double"?g*=2:s==="triple"?g*=3:g+=s,v&&(g*=4),g})(),$e=(s,g,X)=>{if(!X)return"Information not available.";switch(s){case"Container Energy":let Z=o()*10,ue=h!==0?Z*((100+h)/100):Z;return`Base value (${u}) * 10 = ${Z}. With Multiplicator (${Math.ceil(h)}%) = ${ue.toFixed(0)}. Affected by size of cup booster (Level ${X.level||0}).`;case"Tap Value":return`50% of Effective Click Value (${(oe*.5).toFixed(2)}) + Tap Value Increase (${k}) = ${g.toFixed(2)}. Affected by TAP VALUE booster (Level ${X.level||0}).`;case"Recharge Time":const us=6*60,lt=(X.level||0)*20,rt=Math.max(0,us-lt),ct=Math.floor(rt/60),ot=rt%60,ms=`${ct} hour${ct!==1?"s":""} ${ot} minute${ot!==1?"s":""}`;return`Base value (6 hours) - Booster reduction (${lt} minutes) = ${ms}. Affected by delivery speed booster (Level ${X.level||0}).`;default:return"Unknown statistic."}},Be=[{label:"Container Energy",value:`${Math.ceil(b)}`,booster:A},{label:"Tap Value",value:`${Math.ceil(oe*.5+k)}`,booster:te},{label:"Recharge Time",value:(()=>{if((ne==null?void 0:ne.level)!==void 0){const g=(ne==null?void 0:ne.level)*20||0,X=Math.max(0,360-g),Z=Math.floor(X/60),ue=X%60;return`${Z}:${ue.toString().padStart(2,"0")}`}})(),booster:ne}],[Pe,Se]=a.useState(!0);a.useEffect(()=>{(async()=>{Se(!0);try{const[g,X]=await Promise.all([fetch(`https://tg.catserver-production.com/offline_income/check-claim-status/${i}`),fetch(`https://tg.catserver-production.com/offline_income/user-milk-info/${i}`)]);if(!g.ok||!X.ok)throw new Error(`HTTP error! status: ${g.status} or ${X.status}`);const Z=await g.json(),ue=await X.json();Z.can_claim?(y(!0),le(Z.referral_income),J(0)):(y(!1),le(Z.referral_income),J(Z.seconds_until_next_claim)),F(ue.milk_value),U(ue.milk_value_income)}catch(g){console.error("Error checking claim status or getting user milk info:",g),y(!1),J(null)}finally{Se(!1)}})()},[i]),a.useEffect(()=>{let s=null;return re!==null&&re>0?s=setInterval(()=>{J(g=>g!==null&&g>1?g-1:(y(!0),0))},1e3):re===0&&y(!0),()=>{s!==null&&clearInterval(s)}},[re]);const Fe=async()=>{try{const s=await fetch(`https://tg.catserver-production.com/offline_income/claim-milk/${i}`,{method:"POST"}),g=await s.json();s.ok?(z(!0),le(g.referral_income),y(!1),J(60*60*8)):console.error("Failed to claim milk:",g.error)}catch(s){console.error("Error claiming milk:",s)}},Oe=s=>{const g=Math.floor(s/3600),X=Math.floor(s%3600/60),Z=s%60;return`${g.toString().padStart(2,"0")}:${X.toString().padStart(2,"0")}:${Z.toString().padStart(2,"0")}`};a.useEffect(()=>{H>=96?V(Vs):H>=50?V(Gs):H>=11?V(zs):V(mt)},[H]);const Xt=s=>{if(s.level!==void 0&&s.prices!==void 0){const g=s.level+1,X={...s,level:g,cost:s.prices[g]};N(X),d(!0)}},Ze=()=>{d(!1),N(null)},Ht=s=>{if(s.values&&s.level!==void 0&&s.values.length>s.level){const g=s.values[s.level+1];switch(s.title){case"SIZE OF CUP":return`+${g}%`;case"SHARE OF TAP":return`+${g}`;case"Delivery speed":return`-${g} min`;default:return""}}else return"N/A"},et=async()=>{try{const s=await fetch(`https://tg.catserver-production.com/offline_income/check-reward?user_id=${i}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const g=await s.json();console.log(g),t(he(g.ready)),g.ready&&se(g.total_value)}catch(s){s instanceof Error?R(`Error checking reward status. ${s.message}`):R("Error checking reward status. An unknown error occurred.")}},Jt=async()=>{try{const s=await fetch(`https://tg.catserver-production.com/offline_income/remove-from-list?user_id=${i}`,{method:"DELETE"});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);t($t(D)),t(Bt(0)),t(he(!1)),t(xe(null)),S(M)}catch(s){console.error("Error claiming reward",s),s instanceof Error?R(`Error claiming reward. ${s.message}`):R("Error claiming reward. An unknown error occurred.")}},[Kt,Yt]=a.useState(!1);a.useEffect(()=>{if(I){const s=setInterval(()=>{document.visibilityState==="visible"&&(Yt(!0),clearInterval(s))},1e3);return()=>clearInterval(s)}},[I]);const qt=()=>{I?Kt&&(Jt(),q(!0)):(l(!0),Telegram&&Telegram.WebApp&&Telegram.WebApp.openTelegramLink("https://t.me/catapcommunity"))};a.useEffect(()=>{(async()=>{try{const g=await fetch(`https://tg.catserver-production.com/offline_income/remaining-time?user_id=${i}`);if(!g.ok){const Z=await g.text();throw new Error(`HTTP error! status: ${g.status}, response: ${Z}`)}const X=await g.json();X.remaining_time!==!1?(t(xe(X.remaining_time)),S(X.total_time),setTimeout(et,X.remaining_time*1e3)):et()}catch(g){g instanceof Error?R(`Error checking remaining time. ${g.message}`):R("Error checking remaining time. An unknown error occurred.")}})()},[i]),a.useEffect(()=>{let s=null;return j!==null&&j>0?s=setInterval(()=>{j>1?t(xe(j-1)):(t(xe(0)),t(he(!0)))},1e3):j===0&&j!==null&&t(he(!0)),()=>{s!==null&&clearInterval(s)}},[j,t]);const[Qt,tt]=a.useState(!1),[Zt,es]=a.useState(""),[ts,ss]=a.useState(""),as=(s,g)=>{es(s),ss(g),tt(!0)},ns=()=>{tt(!1)},is=()=>{if(typeof window>"u"||!window.navigator)return!1;const s=window.navigator.userAgent.toLowerCase(),g=s.indexOf("ipad")>-1,X=s.indexOf("iphone")>-1,Z=s.indexOf("ipod")>-1;return g||X||Z},De=s=>s.values!==void 0&&s.level!==void 0&&s.level>=s.values.length-1,st=s=>{switch(s.title){case"SIZE OF CUP":return"Max size of cup reached";case"SHARE OF TAP":return"Max tap value reached";case"Delivery speed":return"Min recharge time reached";default:return"Max level reached"}},at=(s,g)=>(s.cost??0)>g,ls=()=>"Not enough balance",We=(s,g)=>De(s)||at(s,g),rs=(s,g)=>De(s)?st(s):at(s,g)?ls():"",nt=G?"100%":j!==null&&j>0?`${100-j/_*100}%`:`${Math.max(1,H)}%`,it=j!==null&&j>0?Js:Ks,cs=async s=>{await(async()=>{try{const Z=await fetch("https://tg.catserver-production.com/api/activate_milk_booster",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:i,booster_name:s.title})});if(!Z.ok){const ue=await Z.json();return console.error(`Failed to activate booster: ${ue.detail||Z.statusText}`),!0}return!1}catch(Z){return console.error(Z),!0}})()||(t(Ys(s.title)),t(Ue(s.cost??0)),Ze())},[os,ds]=a.useState(!0);return a.useEffect(()=>{const s=setTimeout(()=>{ds(!1)},1e3);return()=>clearTimeout(s)},[]),e.jsx(e.Fragment,{children:os?e.jsx("div",{className:"fixed z-50 inset-0 flex items-center justify-center bg-black",children:e.jsx("img",{src:qe,alt:"Loading",className:"w-5/10"})}):e.jsxs("div",{className:"text-white flex flex-col overflow-hidden flex-1 px-6 py-2 h-[100vh] overflow-y-scroll ",children:[e.jsx(Ut,{isVisible:Qt,onClose:ns,title:Zt,message:ts}),x&&e.jsx(zt,{isVisible:C,onClose:Ze,onUpgrade:()=>{cs(x)},title:x.title,description:x.description||"",cost:x.cost,imgSrc:x.img||""}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("img",{src:Us,alt:"Milky Logo",className:"h-16 scale-300 mt-4"})})}),e.jsx("div",{className:"flex items-center justify-center w-full mt-1 mb-1 ",children:e.jsxs("button",{className:`relative font-alt font-semibold h-[30px] w-[40%] rounded-[1rem] flex 
    items-center justify-center px-6 transition-colors duration-300 
    overflow-hidden ${I?"bg-gray-400 text-white":"bg-white text-gray-800"}`,style:{boxShadow:"2px 3px 1px #5d5855",border:"1px solid black"},onClick:()=>{Telegram&&Telegram.WebApp&&(Telegram.WebApp.openTelegramLink("https://t.me/Catapsbot?start=invite"),Telegram.WebApp.close())},children:[e.jsx("span",{className:"relative z-10 text-sm",children:"Invite Cats"}),!I&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#e9eae8] to-[#c9cac9] animate-milkWave"})]})}),e.jsx("div",{className:"text-center text-gray-500 mt-1 text-xs font-alt",children:"Score 5% Milk from frens + 2.5% Milk from their referrals"}),e.jsx("div",{className:"flex gap-1 p-[5px] mb-2 rounded-theme border border-white/20 mt-1",children:Object.entries(mn).map(([s,g])=>e.jsxs("button",{className:ee("flex-1 font-alt font-normal rounded-[5px] py-2.5 relative flex items-center justify-center gap-2",{"bg-white/10":s===B}),onClick:()=>L(s),children:[e.jsx("img",{src:s==="MILK_BOOSTERS"?pe:Xs,alt:g,className:"max-w-[20%] object-contain scale-150"}),e.jsx("span",{children:g})]},s))}),e.jsx(e.Fragment,{children:B==="MILK_STATS"&&e.jsx("div",{className:"flex justify-center items-center text-white w-full px-2",style:{fontSize:"2.0rem",color:"white"},children:e.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:[e.jsx("div",{className:"flex items-center justify-center h-[1.2rem]",children:e.jsx("img",{src:pe,className:"h-8 w-8 object-contain -mt-1 scale-150",alt:"Milk Icon"})}),e.jsx("div",{className:"flex items-center font-alt",children:Pe?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"animate-pulse scale-90",children:"Loading"}),e.jsx(fn,{})]}):Hs(Math.round(P+ae))})]})})}),B==="MILK_BOOSTERS"&&e.jsxs("div",{className:"mt-0",children:[e.jsxs("div",{className:"font-alt mt-2",children:[e.jsx("div",{className:"text-base mb-2 text-left text-white",children:"Milk Stats"}),e.jsx("div",{className:"flex w-full gap-5 justify-stretch",children:Be.map(s=>e.jsxs("div",{className:"text-xs flex py-1 rounded-theme px-3.5 flex-1 items-center bg-white/10 transition-all duration-500 ease-in-out",children:[e.jsx("div",{className:"relative ml-[-32px] w-[60px] h-[35px] overflow-visible pointer-events-none",children:s.booster&&e.jsx("img",{src:s.booster.img,alt:s.label,className:"w-[50px] h-[55px] -translate-y-[11px] scale-120 object-contain"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"text-white/90 flex items-center justify-between",children:[e.jsx("span",{className:"text-white text-sm leading-none ml-[-12px]",children:s.value}),e.jsx("button",{className:"text-gray-500 hover:text-white transition-colors duration-200 ml-2",onClick:()=>{if(typeof s.label=="string"&&s.value!==void 0){const g=typeof s.value=="string"?parseFloat(s.value):s.value;isNaN(g)||as(s.label,$e(s.label,g,s.booster))}},style:{height:"1em",marginTop:"-2px"},children:e.jsx(Gt,{size:12})})]})})]},s.label))})]}),e.jsx("div",{className:"text-base font-alt text-white text-left mt-2",children:"Boosters:"}),e.jsx("div",{className:"flex flex-col gap-2 mt-2",children:r.map(s=>e.jsxs("div",{className:ee("text-xs flex rounded-theme px-3.5 py-2 flex-1 items-center bg-white/5 gap-3 transition-all duration-500 ease-in-out font-alt justify-between",We(s,w)?"opacity-50 cursor-not-allowed":"cursor-pointer hover:bg-white/20"),onClick:()=>{s.level!==void 0&&s.prices!==void 0&&(We(s,w)||Xt(s))},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"relative ml-[-32px] w-[80px] h-[40px] overflow-visible",children:e.jsx("img",{src:s.img,alt:s.title,className:"w-[60px] h-[60px] -translate-y-[10px] scale-120 object-contain"})}),e.jsxs("div",{className:"ml-[-22px] flex flex-col",children:[e.jsx("div",{className:"text-white font-semibold",children:s.title}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:Le,className:"h-3.5 mr-0.5"}),e.jsx("span",{className:"text-white",children:s.prices&&s.level!==void 0&&s.prices[s.level+1]!==void 0?s.prices[s.level+1]:s.cost??0}),e.jsxs("span",{className:"text-white/60 ml-1",children:[" | Level: ",s.level??0]})]}),e.jsx("div",{className:"text-white/70",children:De(s)?st(s):`Next Value: ${Ht(s)}`}),We(s,w)&&e.jsx("p",{className:"text-xs mt-1 text-red-500",children:rs(s,w)})]})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M9 5l7 7-7 7"})})})]},s.title))})]}),B==="MILK_STATS"&&e.jsxs("div",{id:"scrollableDiv5",className:"items-center justify-center overflow-y-scroll relative",children:[e.jsx("img",{src:Y,alt:"Milk Container",className:`w-auto h-[30%] left-1/2 transform translate-x-1/2 object-contain 
         scale-190 mt-4 pointer-events-none ${is()?"ml-[18%]":"ml-[16%]"}`}),e.jsx("div",{className:"scale-75 z-40 mt-1 relative text-xs text-white/50 font-alt text-center flex items-center justify-center gap-2 ",children:j!==null&&j>0?e.jsxs("span",{className:"font-body text-white ",style:{textShadow:"1px 1px 0px #000, -1px -1px 0px #000, 1px -1px 0px #000, -1px 1px 0px #000, 2px 2px 0px #000, -2px -2px 0px #000",fontSize:"1.5rem"},children:[Math.floor(j/3600),":",String(Math.floor(j%3600/60)).padStart(2,"0"),":",String(Math.floor(j%60)).padStart(2,"0")]}):e.jsx("span",{className:"font-alt text-white",style:{textShadow:"1px 1px 0px #000, -1px -1px 0px #000, 1px -1px 0px #000, -1px 1px 0px #000, 2px 2px 0px #000, -2px -2px 0px #000",fontSize:"1.5rem"},children:G?"Go to claim":`${K} / ${Math.round(b)}`})}),e.jsx("div",{className:"mt-1 w-full flex justify-center",children:e.jsxs("div",{className:"w-4/5 rounded-full overflow-visible border-black border-2 relative",children:[G?e.jsxs("div",{className:"relative",children:[e.jsx(O.div,{className:"bg-green-700 w-full rounded-l-full overflow-hidden",initial:{width:"100%"},animate:{width:"100%"},children:e.jsx("div",{className:"h-3 bg-green-700 w-full rounded-l-full relative",children:e.jsx(O.div,{className:"w-1 h-full bg-green-700 absolute rounded-full",initial:{right:"100%",opacity:1},transition:{ease:"backOut",duration:.7}},"claimed")})}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center rounded-full overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-green-500 rounded-full animate-pulseLightBefore"}),e.jsx("div",{className:"absolute inset-0 bg-green-400 rounded-full animate-pulseLightAfter"})]})]}):j!==null&&j>0?e.jsx(O.div,{className:"bg-green-500 w-full rounded-l-full overflow-hidden",initial:{width:"0%"},animate:{width:`${100-j/_*100}%`},children:e.jsx("div",{className:"h-3 bg-green-500 w-full rounded-l-full relative",children:e.jsx(O.div,{className:"w-1 h-full bg-green-500 absolute rounded-full",initial:{right:"100%",opacity:1},transition:{ease:"backOut",duration:.7}},j)})}):e.jsx(O.div,{className:"bg-gradient-to-r from-milk-white to-milk-cream w-full shadow-milk rounded-l-full relative",initial:{width:0},animate:{width:`${Math.max(1,H)}%`},children:e.jsx("div",{className:"h-3 bg-gradient-to-r from-milk-white to-milk-cream w-full rounded-l-full relative",children:e.jsx(O.div,{className:"w-1 h-full bg-milk-white absolute rounded-full",initial:{right:"100%",opacity:1},transition:{ease:"backOut",duration:.7}},H)})}),!G&&(j!==null&&j>0?e.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 scale-250 z-10",style:{left:`calc(${nt} - 7px)`,width:"18px",height:"18px"},children:e.jsx("img",{src:it,alt:"Progress GIF",className:"h-full w-full object-contain"})}):e.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 scale-250 z-10",style:{left:`calc(${nt} - 17px)`,width:"35px",height:"35px"},children:e.jsx("img",{src:it,alt:"Progress GIF",className:"h-full w-full object-contain"})}))]})}),e.jsx("div",{className:"w-full rounded-lg overflow-hidden border border-white/20 mt-4",children:e.jsx("div",{className:" p-1 rounded-lg",children:e.jsxs("div",{className:"bg-white/10  rounded-lg flex flex-col items-center p-1 ",children:[e.jsx("div",{className:"w-full font-alt text-center text-xs text-white/70 flex items-center justify-center",children:T?`Your claim +${D} tokens`:G?"Click to claim your reward":j!==null?"Waiting...":"Progress..."}),e.jsx("button",{className:ee("w-[40%] h-[40px] rounded-[1rem] font-alt font-semibold text-2xl flex items-center justify-center mb-1 -mt-1",{"bg-gray-400 text-white pointer-events-none":!G,"bg-[#ffd233] text-white pointer-events-auto active:text-black active:shadow-lg":G&&!I,"bg-gradient-to-r from-[#a8e063] to-[#56ab2f] text-white pointer-events-auto active:text-black active:shadow-lg":G&&I}),style:{boxShadow:"2px 3px 1px #5d5855",border:"1px solid black"},onClick:qt,disabled:!G,children:e.jsx("span",{className:G&&!I?"text-xl":"text-2xl",children:G?I?"Claim":"Check News":"Claim"})}),e.jsx("div",{className:"w-full font-alt text-center text-xs text-white flex items-center justify-center mt-5 scale-125",children:p&&ie!==null?e.jsxs(e.Fragment,{children:["You claimed ",e.jsxs("span",{className:"text-green-500 mr-1 ml-1",children:[" +",Math.round(ie)," "]}),"  $Mlk"]}):re!==null&&!$&&!p&&ie!==null?e.jsxs(e.Fragment,{children:["Rewards from your frens ",e.jsxs("span",{className:"text-green-500 mr-1 ml-1",children:[" +",Math.round(ie)," "]}),"  $Mlk"]}):$&&ie!==null&&!p?e.jsxs(e.Fragment,{children:["Rewards from your frens ",e.jsxs("span",{className:"text-green-500 mr-1 ml-1",children:[" +",Math.round(ie)," "]}),"  $Mlk"]}):"Loading..."}),e.jsx("div",{className:"flex items-center justify-center w-full mb-1 -mt-9 py-2",children:e.jsx("button",{className:`relative font-alt font-semibold h-[40px] w-[50%] rounded-[1rem] flex items-center 
                      justify-center px-4 transition-colors duration-300 ${$?"bg-gradient-to-r from-[#a8e063] to-[#56ab2f] text-gray-800 mt-7":"bg-gray-400 text-white mt-7"}`,style:{boxShadow:"2px 3px 1px #5d5855",border:"1px solid black"},onClick:Fe,disabled:!$,children:e.jsx("span",{className:"text-sm",children:re!==null&&!$?`${Oe(re)}`:"Claim Milk"})})})]})})})]}),E&&e.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white text-black p-6 rounded-lg shadow-lg z-50",children:[e.jsx("p",{className:"font-alt",children:E}),e.jsx("button",{className:"mt-4 px-4 py-2 bg-gray-800 text-white rounded hover:bg-gray-500",onClick:()=>R(""),children:"Close"})]})]})})},hn=()=>{const t=de(),r=c(Et),n=c(ye),f=n.find(T=>T.title===r),[m]=a.useState(f==null?void 0:f.img),x=c(me),[N,h]=a.useState(0),o=c(Xe),u=o/N*100;a.useEffect(()=>{switch(r){case"ROBOCAT":h(4*3600);break;case"ROBOCAT1":h(8*3600);break;case"ROBOCAT2":h(12*3600);break}},[r]);const[b,k]=a.useState(0),M=c(Pt),_=M/b*100,[S]=a.useState(qs);a.useEffect(()=>{M>0&&k(5*60)},[]);const C=c(Mt),d=c(Rt),[B,L]=a.useState(C),i=c(_e),E=n.find(T=>T.title==="STAMINA LIMIT"),K=(()=>{if(!i)return 0;if((E==null?void 0:E.level)!=null){const{energy:T}=i.bonus||{energy:0};let A=(E==null?void 0:E.level)*500+500||0;return T=="double"?A*=2:T=="triple"?A*=3:A+=T,A}else return 5e3})(),H=c(Ge);let j=K*10;H!==0&&(j=Math.ceil(j*((100+H)/100)));const G=c(ze),Y=c(_t),V=G/j*100,[v,p]=a.useState(Ie);a.useEffect(()=>{},[o,M]);const z=T=>{const q=Math.floor(T/3600),A=Math.floor(T%3600/60),te=Math.floor(T%60);return`${String(q).padStart(2,"0")}:${String(A).padStart(2,"0")}:${String(te).padStart(2,"0")}`};a.useEffect(()=>{let T=null;return d!==null&&d>0?T=setInterval(()=>{d>1?t(xe(d-1)):(t(xe(0)),t(he(!0)))},1e3):d===0&&d!==null&&t(he(!0)),()=>{T!==null&&clearInterval(T)}},[d,t]),a.useEffect(()=>{V>=96?p(Qs):V>=50?p(vt):V>=11?p(Ie):p(Ie)},[V]),a.useEffect(()=>{const T=async()=>{try{const w=await fetch(`https://tg.catserver-production.com/offline_income/remaining-time?user_id=${x}`);if(!w.ok){const D=await w.text();throw new Error(`HTTP error status: ${w.status}, response: ${D}`)}const W=await w.json();W.remaining_time!==!1&&(t(xe(W.remaining_time)),L(W.total_time))}catch(w){console.error("Error checking remaining time",w)}},q=async()=>{try{if(!(await fetch("https://tg.catserver-production.com/offline_income/add-to-queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:x,recharge_time:B,total_value:j,total_time:B})})).ok)throw new Error("Failed to add user to queue");T()}catch{}},A=async()=>{try{const w=await fetch(`https://tg.catserver-production.com/offline_income/check-queue?user_id=${x}`);if(!w.ok){const D=await w.text();throw new Error(`HTTP error! status: ${w.status}, response: ${D}`)}return(await w.json()).in_queue}catch{return!1}},te=async()=>{try{const w=await fetch(`https://tg.catserver-production.com/offline_income/check-reward?user_id=${x}`);if(!w.ok){const D=await w.text();throw new Error(`HTTP error status: ${w.status}, response: ${D}`)}const W=await w.json();return{ready:W.ready,total_value:W.total_value}}catch{return{ready:!1,total_value:null}}};(async()=>{if(G>=j&&d==null&&!Y)try{const[w,W]=await Promise.all([A(),te()]);w?T():W.ready||q(),t(he(W.ready))}catch{}})()},[G,j,x,t]);const I=`${o/N*100}%`,l=`${M/b*100}%`;return e.jsxs("div",{className:"z-10 mb-5 px-6 shadow-lg pointer-events-none w-full flex flex-col items-center relative",children:[e.jsxs("div",{className:"relative flex justify-center items-center w-full text-white mb-2 -mt-2",children:[e.jsx("div",{className:"relative flex items-center justify-center -mt-1",style:{width:"36px",height:"36px",overflow:"visible"},children:d!==null&&d>0?e.jsx("img",{src:Zs,alt:"Timer",className:"w-auto h-[100%] object-contain scale-110"}):e.jsx("img",{src:v,alt:"Milk Container",className:"w-auto h-[100%] object-contain scale-110"})}),e.jsx("span",{className:"font-alt",style:{textShadow:"1px 1px 0px #000, -1px -1px 0px #000, 1px -1px 0px #000, -1px 1px 0px #000, 2px 2px 0px #000, -2px -2px 0px #000",fontSize:"1.3rem"},children:d!==null&&d>0?`${Math.floor(d/3600)}:${String(Math.floor(d%3600/60)).padStart(2,"0")}:${String(Math.floor(d%60)).padStart(2,"0")}`:Y?"Go to claim":`${ft(G)} / ${ft(j)}`})]}),e.jsx("div",{className:"w-full flex justify-center -mt-4",children:e.jsx("div",{className:"w-3/5 rounded-full overflow-hidden border-black border-2",children:Y?e.jsxs("div",{className:"relative",children:[e.jsx(O.div,{className:"bg-green-700 w-full py-0.5 shadow-milk rounded-l-full",initial:{width:"100%"},animate:{width:"100%"},children:e.jsx("div",{className:"h-0 bg-green-700 w-full rounded-l-full relative",children:e.jsx(O.div,{className:"w-1 h-full bg-green-700 absolute rounded-full",initial:{right:"100%",opacity:1},transition:{ease:"backOut",duration:.7}},"claimed")})}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-green-500 rounded-full animate-pulseLightBefore"}),e.jsx("div",{className:"absolute inset-0 bg-green-400 rounded-full animate-pulseLightAfter"})]})]}):e.jsx(O.div,{className:`w-full py-0.5 rounded-l-full ${d!==null&&d>0?"bg-green-500":" shadow-milk bg-gradient-to-r from-milk-white to-milk-cream"}`,initial:{width:d!==null&&d>0?"100%":"0%"},animate:{width:d!==null&&d>0?`${100-d/B*100}%`:`${Math.max(1,V)}%`},children:e.jsx("div",{className:`h-0 ${d!==null&&d>0?"bg-green-500":"bg-gradient-to-r from-milk-white to-milk-cream"} w-full rounded-l-full relative`,children:e.jsx(O.div,{className:`w-1 h-full ${d!==null&&d>0?"bg-green-500":"bg-milk-white"} absolute rounded-full`,initial:{right:"100%",opacity:1},transition:{ease:"backOut",duration:.7}},d!==null&&d>0?d:V)})})})}),e.jsxs("div",{className:"relative flex justify-center items-center w-full text-white",children:[e.jsx("div",{className:"relative flex items-center justify-center",style:{width:"36px",height:"36px",overflow:"visible"},children:M>0?e.jsx(O.img,{src:S,alt:"Guru Animation",className:"pointer-events-none"}):o>0&&e.jsx(O.img,{src:m,alt:"Robot Animation",className:"pointer-events-none",animate:{rotate:["0","-10deg","0deg","10deg","0deg"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})}),e.jsx("span",{style:{textShadow:"1px 1px 0px #000, -1px -1px 0px #000, 1px -1px 0px #000, -1px 1px 0px #000, 2px 2px 0px #000, -2px -2px 0px #000",fontSize:"1.5rem"},children:M>0?z(M):z(o)})]}),M>0?e.jsx("div",{className:" w-full flex justify-center mb-4",children:e.jsx("div",{className:"w-4/5 rounded-full overflow-visible border-black border-2 relative",children:e.jsxs("div",{className:"relative",children:[e.jsx(O.div,{className:"bg-gradient-to-r from-amber-500 to-red-600 w-full py-1 shadow-energy rounded-l-full relative",initial:{width:0},animate:{width:`${Math.max(1,_)}%`},children:e.jsx("div",{className:"h-2 bg-gradient-to-r from-amber-500 to-red-600 w-full rounded-l-full relative",children:e.jsx(O.div,{className:" h-full bg-green-500 absolute rounded-full",initial:{right:"100%",opacity:1},transition:{ease:"backOut",duration:.7}},_)})}),M!==null&&M>0&&e.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 scale-250 z-10",style:{left:`calc(${l} - 7px)`,width:"18px",height:"18px"}})]})})}):e.jsx("div",{className:" w-full flex justify-center",children:e.jsx("div",{className:"w-4/5 rounded-full overflow-visible border-black border-2 relative",children:e.jsxs("div",{className:"relative",children:[e.jsx(O.div,{className:"bg-gradient-to-r from-amber-500 to-red-600 w-full py-1 shadow-energy rounded-l-full relative",initial:{width:0},animate:{width:`${Math.max(1,u)}%`},children:e.jsx("div",{className:"h-2 bg-gradient-to-r from-amber-500 to-red-600 w-full rounded-l-full relative",children:e.jsx(O.div,{className:" h-full bg-amber-500 absolute rounded-full",initial:{right:"100%",opacity:1},transition:{ease:"backOut",duration:.7}},u)})}),o!==null&&o>0&&e.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 scale-250 z-10",style:{left:`calc(${I} - 7px)`,width:"18px",height:"18px"}})]})})})]})},pn={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},ht={hidden:{opacity:0},show:{opacity:1},close:{opacity:0,x:50}},gn=({setActiveInterface:t})=>{const r=de(),n=c(Ct),f=c(Je),m=c(Ne),x=c(we),N=c(me),h=c(ea),o=c(ta),u=c(sa),b=c(aa),[k,M]=a.useState(ge.SPECIAL);a.useEffect(()=>{r(na(n+f))},[r,n,f]);const _=async(i,E)=>{try{const R=await fetch("https://tg.catserver-production.com/cattg/check_membership",{method:"POST",headers:{"Content-Type":"application/json",Origin:window.location.origin},body:JSON.stringify({user_id:i,chat_id:E})});if(!R.ok)throw new Error(`Ошибка сервера: ${R.statusText}`);return(await R.json()).is_member}catch(R){return console.error("Ошибка при проверке членства:",R),!1}};a.useEffect(()=>{(async()=>{if(N!==null){const E=await Promise.all(h.map(async R=>{const K=await _(N,R.chatId);return{...R,isDone:K}}));r(Ft(E))}})()},[]),a.useEffect(()=>{r(ia(m)),r(la(n+f))},[m,u,N,r]);const S=x.findIndex(i=>m<i.cost),C=S===-1?x.length-1:S-1,[d,B]=a.useState(x[C]||null);a.useEffect(()=>{const i=x.findIndex(K=>m<K.cost),E=i===-1?x.length-1:i-1,R=x[E]||null;if(R)B(R);else{const K=x.reduce((H,j)=>H.cost>j.cost?H:j);B(K)}},[m,x]),a.useEffect(()=>{r(ra(k))},[r,k]);const L=async(i,E,R)=>{if(!await(async()=>{try{const j=await fetch("https://tg.catserver-production.com/api/complete_task",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:N,task_id:i,task_type:E})});if(!j.ok){const G=await j.json();return console.error(`Failed to claim task: ${G.detail||j.statusText}`),!0}return!1}catch(j){return console.error(j),!0}})()){switch(E){case"leagues":r(da(i));break;case"specials":r(oa(i));break;case"refTasks":r(ca(i));break;default:console.error("Unknown task type");return}i=="16"||i=="17"||i=="18"||r(ua(R))}};return e.jsxs("div",{className:"text-white w-full flex flex-col overflow-hidden py-2 h-screen",children:[e.jsxs("div",{className:"border-b border-white/20 pb-2 flex flex-col mx-6",children:[e.jsx(Qe,{}),e.jsxs("div",{className:"text-sl text-white/50 font-alt text-center flex items-center justify-center gap-2",onClick:()=>t(Q.LEAGUE_DETAILS),children:[e.jsx("img",{src:d==null?void 0:d.img,className:"h-8 scale-150"}),d==null?void 0:d.title," ",e.jsx(Me,{})]})]}),e.jsx("div",{className:"flex gap-2 p-[5px] mb-2 rounded-theme border border-white/20 mt-4 mx-6",children:Object.entries(ge).map(([i,E])=>e.jsxs("button",{className:ee("flex-1 font-alt font-normal rounded-[5px] py-2.5 relative",{"bg-white/10":E===k}),onClick:()=>{M(E)},children:[E,e.jsx(ve,{children:b[E]&&e.jsx(O.div,{transition:{y:{repeat:1/0,repeatDelay:.3}},animate:{y:[0,-10,0],opacity:1},initial:{opacity:0},exit:{opacity:0,y:-40},className:"bg-bgNotify w-2.5 h-2.5 absolute top-[5px] right-[5px] rounded-full"})})]},i))}),e.jsxs(O.section,{id:"scrollableSection",variants:pn,initial:"hidden",animate:"show",className:ee("flex flex-col flex-1 justify-start overflow-y-scroll px-6",ge.SPECIAL===k),children:[ge.LEAGUES===k&&x.map(i=>e.jsx(O.div,{variants:ht,children:e.jsx(ve,{children:!i.isClaimed&&e.jsx(O.div,{initial:{opacity:0,marginBottom:"0.5rem"},animate:{opacity:1,marginBottom:"0.5rem"},exit:{opacity:0,x:50,marginBottom:0},children:e.jsx(Ae,{imgSrc:i.img||"",title:i.title,cost:i.referalIncome,isClaimed:i.isClaimed,isDone:i.isDone,parentName:"league",onClaimClick:()=>L(i.id,"leagues",i.referalIncome),progressPercentage:m*100/i.cost,currentLeague:d||void 0,id:i.id},i.title)})})},i.id)),ge.SPECIAL===k&&e.jsx(e.Fragment,{children:h.filter(i=>!i.isClaimed&&["19","18","17","16","6","5","2","1"].includes(i.id)).sort((i,E)=>{const R=["19","18","17","16","6","5","2","1"];return R.indexOf(i.id)-R.indexOf(E.id)}).map(i=>e.jsx(Ae,{userId:N,id:i.id,imgSrc:i.img,title:i.title,cost:i.cost,chatId:i.chatId,isDone:i.isDone,className:"active:bg-white/50 flex-none mb-2",parentName:"special",onClaimClick:()=>L(i.id,"specials",i.cost)},i.id))}),ge.REF_TASKS===k&&o.map(i=>e.jsx(O.div,{variants:ht,children:e.jsx(ve,{children:!i.isClaimed&&e.jsx(O.div,{initial:{opacity:0,marginBottom:"0.5rem"},animate:{opacity:1,marginBottom:"0.5rem"},exit:{opacity:0,x:50,marginBottom:0},children:e.jsx(Ae,{imgSrc:i.img,title:i.title,cost:i.award,isClaimed:i.isClaimed,isDone:i.isDone,parentName:"refTask",onClaimClick:()=>L(i.id,"refTasks",i.award),progressPercentage:(n+f*100)/i.goal},i.title)})})},i.id))]})]})},vn=()=>{const t=de(),r=c(ma),n=c(fa),f=c(It),[m,x]=a.useState(!1);a.useEffect(()=>{if(r&&r>0||n&&n>0){const h=new Date,o=new Date(h.toLocaleString("en-US",{timeZone:"UTC"})),u=f?new Date(f):null;u&&o.getTime()-u.getTime()>=120*60*1e3&&x(!0)}},[r,n]);const N=()=>{x(!1),t(Ot(0)),t(Dt(0))};return e.jsx(ve,{children:m&&e.jsxs(O.div,{className:"fixed text-white inset-0 flex items-end justify-center z-50 backdrop-blur-sm font-alt",initial:{opacity:0,y:"100%"},animate:{opacity:1,y:"0%"},exit:{opacity:0,y:"100%"},transition:{type:"spring",stiffness:100,damping:20},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-50"}),e.jsxs("div",{className:"w-full h-2/3 rounded-lg p-8 relative z-10 flex flex-col justify-between",style:{backgroundColor:"rgba(0, 0, 0, 0.8)"},children:[e.jsx("button",{className:"absolute top-2 right-2 text-white bg-transparent hover:bg-gray-600 text-2xl rounded-full p-1",onClick:N,children:e.jsx(O.div,{whileHover:{scale:1.1},children:e.jsx(ke,{path:Te,size:1})})}),e.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center",children:[e.jsx("img",{src:xa,alt:"Notification",className:"object-contain w-64 h-64 rounded-full"}),e.jsx("h2",{className:"text-center text-xl font-bold mb-4",children:"Your bot earned while you were away!"}),r>0&&e.jsxs("p",{className:"text-center text-lg mb-2",children:["Balance: ",r]}),n>0&&e.jsxs("p",{className:"text-center text-lg mb-2",children:["Milk: ",n]})]}),e.jsx("button",{className:"w-full text-white font-alt py-2 px-4 rounded-full relative opacity-80 hover:opacity-40",style:{background:"linear-gradient(to right, #F97316, #F59E0B)"},onClick:N,children:"Got it"})]})]})})},yn=()=>{const t=c(Ne),r=c(we),[n,f]=a.useState(null),[m,x]=a.useState(null),N=r.findIndex(C=>t<C.cost),h=N===-1?r.length-1:N-1,[o,u]=a.useState(r[h]||null),[b,k]=a.useState(h);a.useEffect(()=>{const C=r[b];let d=r[b];if(b+1<=r.length&&(d=r[b+1]),C)u(C),m||(x(C),d!==void 0&&(console.log(d),f(d)));else{const B=r.reduce((L,i)=>L.cost>i.cost?L:i);u(B),m||(x(o),d!==void 0&&(console.log(d),f(d)))}},[r,b,m]);const M=()=>{k(b===0?r.length-1:b-1)},_=()=>{k(b===r.length-1?0:b+1)};if(!o)return e.jsx("div",{children:"No league found for the current balance."});const S=m&&o&&parseInt(m.id,10)<parseInt(o.id,10);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"font-alt bg-cover bg-center flex flex-col text-white items-center px-6 flex-1 py-4",children:[e.jsxs("div",{className:"flex flex-col text-center",children:[e.jsx("p",{className:"mb-4 text-xl",children:o.title}),e.jsx("p",{className:"mb-4  text-white/60",children:"The number of taps determines the league you deserve."})]}),e.jsxs("div",{className:"flex flex-col flex-1 mb-16 items-center w-full",children:[e.jsxs("div",{className:"flex justify-between gap-10 flex-1 items-center w-full",children:[e.jsx("div",{onClick:M,className:"w-4",children:e.jsx(ha,{className:"z-100"})}),e.jsx("div",{className:"flex-1 flex justify-center max-w-[80%]",children:e.jsx("img",{src:o.img,className:"flex-1 object-contain scale-150 pointer-events-none",style:S?{filter:"blur(5px)"}:{}})}),e.jsx("div",{onClick:_,className:"w-4",children:e.jsx(pa,{className:"z-100"})})]}),t<=o.cost?e.jsxs("div",{className:"mt-4 w-full flex flex-col items-center",children:[e.jsx("div",{className:"text-center",children:e.jsxs("span",{style:{textShadow:"1px 1px 0px #000, -1px -1px 0px #000, 1px -1px 0px #000, -1px 1px 0px #000, 2px 2px 0px #000, -2px -2px 0px #000",fontSize:"1.5rem"},children:[t," / ",o.cost]})}),e.jsx("div",{className:"w-full bg-black/30 rounded-full border-2 border-black/30",children:e.jsx("div",{className:"bg-yellow-400 h-1 rounded-full bg-gradient-to-r from-yellow-400 via-amber-300 to-yellow-400 transition-all",style:{width:`${t/o.cost*100}%`}})}),e.jsx("p",{className:"text-white/50 text-center text-xs",children:e.jsx("span",{className:"text-red-400",children:"Progress"})})]}):e.jsxs("div",{className:"mt-4 w-full flex flex-col items-center",children:[e.jsx("div",{className:"text-center",children:e.jsx("span",{style:{textShadow:"1px 1px 0px #000, -1px -1px 0px #000, 1px -1px 0px #000, -1px 1px 0px #000, 2px 2px 0px #000, -2px -2px 0px #000",fontSize:"1.5rem"},children:n?`${t} / ${n.cost}`:"0 / 0"})}),e.jsx("div",{className:"w-full bg-black/30 rounded-full border-2 border-black/30",children:e.jsx("div",{className:"bg-yellow-400 h-1 rounded-full bg-gradient-to-r from-yellow-400 via-amber-300 to-yellow-400 transition-all",style:{width:n?`${t/n.cost*100}%`:"0%"}})}),e.jsx("p",{className:"text-white/50 text-center text-xs",children:m&&o.cost===m.cost?e.jsx("span",{className:"text-yellow-400",children:"Progress"}):m&&o.cost<m.cost?e.jsx("span",{className:"text-green-400",children:"Done"}):null})]})]})]})})},wn=({referral:t})=>{const r=c(we),[n,f]=a.useState(null),[m,x]=a.useState(0);return a.useEffect(()=>{const N=r.findIndex(u=>t.tapsIncome<u.cost)-1,h=r[N]||r[r.length-1],o=r[N+1]||null;if(f(h),o){const u=(t.tapsIncome-h.cost)/(o.cost-h.cost)*100;x(Math.min(u,100))}else x(100)},[t,r]),e.jsxs("div",{className:ee("text-sm flex items-center rounded-theme px-3.5 py-2 bg-white/5 gap-2 transition-all duration-500 ease-in-out font-alt",ee),children:[e.jsxs("div",{className:"flex flex-col flex-grow",children:[e.jsxs("div",{className:"flex items-center justify-left w-full",children:[e.jsxs("span",{className:"font-semibold",children:[t.fullName," | "]}),e.jsx(nn,{className:"ml-1 text-white/70"}),e.jsxs("span",{className:"text-white/70 ml-1",children:["+",t.referralsCount]})]}),e.jsx("div",{className:"flex items-center w-full ",children:n&&e.jsxs(e.Fragment,{children:[e.jsx("img",{src:n.img,className:"h-4 mr-1 scale-200",alt:n.title}),e.jsxs("span",{children:[n.title," | "]}),e.jsx("img",{src:pe,className:"h-5 ml-1 scale-200",alt:"Balance"}),e.jsxs("span",{children:["+",t.totalMilk]})]})}),n&&e.jsx("div",{className:"w-full mt-1",children:e.jsx("div",{className:"w-full bg-black/30 rounded-full h-1.5",children:e.jsx("div",{className:"bg-yellow-400 h-full rounded-full bg-gradient-to-r from-yellow-400 via-amber-300 to-yellow-400 transition-all",style:{width:`${m}%`}})})})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M9 5l7 7-7 7"})})})]})},bn=()=>{const t=c(ga),r=c(va),[n,f]=pt.useState(fe.REFFERAL),m=c(me),[x,N]=a.useState(0),[h,o]=a.useState(0),[u,b]=a.useState([]),k=c(Je);a.useEffect(()=>{const i=async()=>{try{const[R]=await Promise.all([fetch(`https://tg.catserver-production.com/offline_income/user-milk-info/${m}`)]);if(!R.ok)throw new Error(`HTTP error! status: ${R.status}`);const K=await R.json();N(K.milk_value_income)}catch(R){console.error("Error checking claim status or getting user milk info:",R)}};i();const E=setInterval(i,6e4);return()=>clearInterval(E)},[m]),a.useEffect(()=>{(async()=>{try{const E=await fetch(`https://tg.catserver-production.com/offline_income/referral-info/${m}`);if(!E.ok)throw new Error(`HTTP error! status: ${E.status}`);const R=await E.json();o(R.userReferralsCount),b(R.topReferrals)}catch(E){console.error("Error fetching referral info:",E)}finally{}})()},[m]);const[M,_]=a.useState(!1),S=()=>{_(!1)},C=()=>{_(!0)},d=i=>{const K=Math.random()*5+5;return Math.round(i*4*(K/100))},L=[{title:"Total Players",value:t},{title:"Daily Users",value:(i=>Math.round(i*4))(r)},{title:"Online Players",value:d(r)}];return e.jsxs("div",{className:"text-white font-alt w-full flex flex-col overflow-hidden px-6 h-screen py-4",children:[e.jsxs("div",{className:"border-b border-white/20 pb-2 flex flex-col",children:[e.jsxs("div",{className:"text-xl text-center font-bold",children:[h," FRENS"]}),e.jsxs("div",{className:"text-sl font-alt text-center text-green-500",children:["+ ",x]}),e.jsxs("div",{className:"text-xs text-center text-gray-500 mb-2",children:[k," Inactive Users",e.jsx("button",{className:"ml-1 text-gray-500",onClick:C,children:e.jsx(Gt,{className:"text-white",size:10})})]}),e.jsx(Ut,{isVisible:M,onClose:S,title:"How it Works",message:"Active users are those who have accumulated a balance of 1000 or more. Inactive users have a balance less than 1000."}),e.jsx("button",{className:"w-full text-white font-alt py-2 px-4 rounded-full relative opacity-80 hover:opacity-40",style:{background:"linear-gradient(to right, #F97316, #F59E0B)"},onClick:()=>{Telegram&&Telegram.WebApp&&(Telegram.WebApp.openTelegramLink("https://t.me/Catapsbot?start=invite"),Telegram.WebApp.close())},children:"INVITE CATS"}),e.jsx("div",{className:"text-center text-gray-500 mt-2 text-sm",children:"Invite your cats and receive a bonus of +2500 points for you and your friends"})]}),e.jsxs("div",{className:"flex font-alt gap-2 p-[5px] mb-2 rounded-theme border border-white/20 mt-4",children:[e.jsx("button",{className:ee("flex-1 font-normal rounded-[5px] py-2.5 relative",{"bg-white/10":n===fe.REFFERAL}),onClick:()=>f(fe.REFFERAL),children:"CATS FRENS"}),e.jsx("button",{className:ee("flex-1 font-normal rounded-[5px] py-2.5 relative",{"bg-white/10":n===fe.REF_STATS}),onClick:()=>f(fe.REF_STATS),children:"STATS"})]}),n===fe.REFFERAL&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-left font-alt text-white/50 text-sm",children:"Cats Frens"}),e.jsx("div",{id:"scrollableDiv1",className:"flex flex-col gap-1 overflow-y-scroll",children:u.map((i,E)=>e.jsx(wn,{referral:i},E))})]}),n===fe.REF_STATS&&e.jsx("div",{className:"flex-1 text-white px-6 py-1",children:e.jsx("div",{className:"flex flex-col gap-px font-alt text-xl",children:L.map(i=>e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-sm text-white/50",children:i.title}),e.jsx("div",{className:"text-base text-white",children:Ve(i.value)})]},i.title))})})]})},jn=({setActiveInterface:t})=>{const r=de(),[n,f]=a.useState(!0),[m,x]=a.useState(0),[N,h]=a.useState(0),o=c(ya),u=c(Ne),b=c(me),k=c(He),_=c(ye).find(v=>v.title==="MULTIPAW"),C=(_?_.level:0)??0,d=c(we),B=d.findIndex(v=>u<v.cost),L=B===-1?d.length-1:B-1;a.useEffect(()=>{(async()=>{try{const p=await fetch(`https://tg.catserver-production.com/offline_income/user-milk-info/${b}`);if(!p.ok)throw new Error(`HTTP error! status: ${p.status}`);const z=await p.json();x(z.milk_value),h(z.milk_value_income)}catch(p){console.error("Error getting user milk info:",p)}finally{}})()},[b]),a.useEffect(()=>{const v=setTimeout(()=>{f(!1)},1e3);return()=>clearTimeout(v)},[]);const i=c(wa),[E]=a.useState({1:0,2:0,3:Math.min(100,o/2*100),4:k?100:0,5:Math.min(100,C/8*100),6:0,7:Math.min(100,(m+N)/15e4*100)}),R=c(Ke),K=c(Ye);a.useEffect(()=>{(async()=>{for(const p of i){if(p.isDone)continue;let z=0;if(p.id==="6"&&R!=="0"&&r(Ce(p.id)),p.id==="1"||p.id==="2")try{(await(await fetch(`https://tg.catserver-production.com/cattg/get_raffle_task_status/${b}/${p.id}`)).json()).status&&r(Ce(p.id))}catch(I){console.error(`Failed to fetch status for task ${p.id}:`,I)}if(p.goal){switch(p.id){case"3":z=o;break;case"4":z=k?1:0;break;case"5":z=C||0;break;case"7":z=m+N;break}z>=p.goal&&r(Ce(p.id))}}})()},[o,k,C,L,m,N,r,i,b]);const[H,j]=a.useState({}),G=async v=>{if(v.interface==="http"&&v.url&&v.id!=="3"&&v.id!=="6"?Telegram.WebApp.openLink(v.url,{try_instant_view:!0}):v.interface==="http"&&v.url&&(v.id=="3"||v.id=="6")?(Telegram.WebApp.openTelegramLink(v.url),Telegram.WebApp.close()):v.interface==="BOOST"?t(Q.BOOST):v.interface==="LEAGUE_DETAILS"?t(Q.LEAGUE_DETAILS):v.interface==="MILK"&&t(Q.MILK),(v.id==="1"||v.id==="2")&&j(p=>({...p,[v.id]:!0})),v.id==="1"||v.id==="2")try{(await fetch("https://tg.catserver-production.com/cattg/set_raffle_task_status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:b,task_id:v.id,status:!0})})).ok?setTimeout(()=>{r(Ce(v.id)),j(z=>({...z,[v.id]:!1}))},5e3):j(z=>({...z,[v.id]:!1}))}catch{j(z=>({...z,[v.id]:!1}))}},Y=i.every(v=>v.isDone);a.useEffect(()=>{(async()=>{if(Y&&!K)try{(await fetch(`https://tg.catserver-production.com/offline_income/set_raffle_is_done/${b}`,{method:"POST",headers:{"Content-Type":"application/json"}})).ok?console.log("Raffle done successfully set for user",b):console.error(`Failed to set raffle done for user ${b}`)}catch(p){console.error(`Error setting raffle done for user ${b}:`,p)}})()},[Y,b]);const V=i.filter(v=>v.isDone).length;return e.jsx(e.Fragment,{children:n?e.jsx("div",{className:"fixed z-50 inset-0 flex items-center justify-center bg-black",children:e.jsx("img",{src:qe,alt:"Loading",className:"w-5/10"})}):e.jsxs("div",{className:"text-white w-full flex flex-col overflow-hidden py-1 h-screen ",children:[e.jsxs("div",{className:"flex justify-between items-center px-4",children:[e.jsx("button",{onClick:()=>t(Q.TAP),className:"text-white transition scale-200 mt-4 ml-2",children:"← "}),e.jsx("button",{onClick:()=>t(Q.TAP),className:"text-white color-white transition scale-150 mt-5 mr-2",children:"✖ "})]}),e.jsx("div",{className:"flex justify-center items-center py-5",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("img",{src:At,alt:"Milky Logo",className:"h-56 w-56 -mt-16"})})}),e.jsx(O.section,{id:"scrollableDiv6",className:"flex flex-col flex-1 justify-start overflow-y-scroll px-6 font-alt py-6 -mt-20",children:i.map(v=>{const p=E[v.id];return e.jsxs(O.div,{className:"flex justify-between items-center gap-1 mb-2 p-1 rounded-lg bg-black/15",children:[e.jsx("div",{className:"relative w-[60px] h-[60px] overflow-visible",children:e.jsx("img",{src:v.img,alt:v.title,className:`object-contain w-[60px] h-[60px] -translate-x-6 ${v.id==="6"?"scale-150":"scale-125"}`})}),e.jsxs("div",{className:"flex flex-col text-xs text-white w-full -translate-x-7",children:[e.jsx("p",{children:v.title}),!v.isDone&&v.goal&&e.jsx("p",{className:"text-xs text-gray-300",children:`${Math.round(p)}%`}),e.jsx("div",{className:"w-full bg-black/30 rounded-full border-2 border-black/30",children:e.jsx("div",{className:"bg-orange-400 h-1 rounded-full bg-gradient-to-r from-orange-400 via-amber-300 to-orange-400 transition-all",style:{width:`${v.isDone?100:p}%`}})})]}),v.isDone?e.jsx("div",{className:"ml-auto px-2 color-green mr-2",children:"✓"}):H[v.id]?e.jsx("div",{className:"color-green",style:{scale:"0.55"},children:e.jsx(an,{color:"#ffffff",loading:!0,height:12,width:2,radius:1,margin:.1})}):e.jsx("button",{className:"ml-auto mr-2 py-1.5 px-3 rounded-full text-sm font-medium bg-gradient-to-r from-[#a8e063] to-[#56ab2f] text-white hover:bg-blue-600 transition-all",onClick:()=>G(v),children:"Go"})]},v.id)})}),e.jsxs("div",{className:"flex flex-col items-center py-5 relative",children:[e.jsx(O.div,{className:"absolute ml-[6rem] z-50 cursor-pointer flex justify-center items-center w-6 h-6 rounded-full",onClick:()=>Telegram.WebApp.openTelegramLink("https://t.me/catapcommunity/95"),style:{width:"20px",height:"20px",border:"1px solid white"},initial:{opacity:1},animate:{opacity:[1,1,1]},transition:{duration:2,repeat:1/0,repeatType:"loop"},children:e.jsx("div",{className:"flex justify-center items-center w-full h-full rounded-full",children:e.jsx(Wt,{icon:Vt,style:{color:"white"}})})}),e.jsxs("p",{className:"text-sm text-white font-alt",children:["Progress: ",V,"/",i.length]}),e.jsx("p",{className:"text-xs text-gray-300 font-alt mt-2",children:"Complete all tasks and wait for the opportunity to get into the whitelist NFT Catap game"})]})]})})};function Mn(){const t=de(),[r,n]=a.useState(!1),f=c(bt),[m,x]=a.useState(""),N=window.location.href,h=new URL(N),u=new URLSearchParams(h.search).get("user_id"),b=c(je),k=c(Ne),M=c(ye),_=c(we),[S,C]=a.useState(!0),d=_.findIndex(w=>k<w.cost),B=d===-1?_.length-1:d-1,[L,i]=a.useState(_[B]||null),[E,R]=a.useState(!1),K=c(Lt),H=c(Xe),j=c(_e);a.useEffect(()=>{const w=setTimeout(()=>{C(!1)},3e3);return()=>clearTimeout(w)},[]),a.useEffect(()=>{const w=Telegram.WebApp.initData,W=new URLSearchParams(w);if(((W.get("user")?JSON.parse(W.get("user")).id:"")==u||u=="5499493097")&&u&&m==""){x(u),t(ba(u));const se=async()=>{try{const J=await fetch(`https://tg.catserver-production.com/api/user/${u}`);if(!J.ok)throw new Error("Failed to fetch user data");const $=await J.json(),y=$.user_data;if($.WhiteListCost!=null&&$.WhiteListCost!=0&&t(Ta($.WhiteListCost)),$.wallet!=null&&$.wallet!=="0"&&t(Sa($.wallet)),$.WhiteListStatus!=null&&t(St($.WhiteListStatus)),$.raffleStatus!=null&&t(Ca($.raffleStatus)),y.containerEnergy!=null&&y.containerEnergy!=0&&t(Ea(y.containerEnergy)),y.tapPercentage!=null&&y.tapPercentage!=0&&t(Ia(y.tapPercentage)),y.rechargeTime!=null&&y.recharge_time!=0&&t(Aa(y.rechargeTime)),y.currentIncome!=null&&y.currentIncome!=0&&t(Bt(y.currentIncome)),y.robot_name!=null&&t(Nt(y.robot_name)),$.robot_start_time!=null&&t(La($.robot_start_time)),y.milkBoosters&&y.milkBoosters.length>0){const P=y.milkBoosters.map(F=>({title:F.title,cost:F.cost,level:F.level,description:F.description||"",img:F.img||""}));t(Ma(P))}if(y.dailyBoosters&&y.dailyBoosters.length>0){const P=y.dailyBoosters.map(F=>({title:F.title,count:F.count,total:F.total}));t(Ra(P))}if(y.boosters&&y.boosters.length>0){const P=y.boosters.map(F=>({title:F.title,level:F.level,cost:F.cost}));t(_a(P))}y.skins&&y.skins.length>0&&t($a(y.skins)),y.referalIncome!=null&&t(Ba(y.referalIncome)),y.tapsIncome!=null&&t(Pa(y.tapsIncome)),y.tasksIncome!=null&&t(Fa(y.tasksIncome)),y.balance!=null&&(t(Oa(y.balance)),setTimeout(()=>R(!0),1e3)),y.currentEnergy!=null&&y.maxEnergy!=null&&y.energyPerSecond!=null&&(t(Tt(y.currentEnergy)),t(Da(y.maxEnergy)),t(Wa(y.energyPerSecond))),y.leagues&&y.leagues.length>0&&t(Va(y.leagues)),y.specials&&y.specials.length>0&&t(Ft(y.specials)),y.refTasks&&y.refTasks.length>0&&t(Ga(y.refTasks)),$.balance_increase!=null&&t(Ot($.balance_increase)),$.milk_increase!=null&&t(Dt($.milk_increase)),$.remaining_time!=null&&$.remaining_time>0&&(t(jt($.remaining_time)),t(kt()),setTimeout(()=>{t(za())},$.remaining_time*1e3))}catch(J){console.error("Error fetching user data:",J)}},ie=async()=>{try{const J=await fetch("https://tg.catserver-production.com/api/stats");if(!J.ok)throw new Error("Failed to fetch statistics");const $=await J.json();$.TotalBalance!=null&&t(Ua($.TotalBalance)),$.TotalUsers!=null&&t(Xa($.TotalUsers)),$.UsersToday!=null&&t(Ha($.UsersToday))}catch(J){console.error("Error fetching statistics:",J)}},le=async()=>{try{const[J,$,y,P]=await Promise.all([fetch(`https://tg.catserver-production.com/offline_income/active-referrals-count/${u}`),fetch(`https://tg.catserver-production.com/offline_income/inactive-referrals-count/${u}`),fetch(`https://tg.catserver-production.com/offline_income/new-active-referrals-count/${u}`),fetch(`https://tg.catserver-production.com/offline_income/new-task-referrals-count/${u}`)]);if(!J.ok||!$.ok||!y.ok)throw new Error("Failed to fetch referral counts");const F=await J.json(),ae=await $.json(),U=await y.json(),ce=await P.json();t(Ja(F.active_referrals_count)),t(Ka(ae.inactive_referrals_count)),t(Ya(U.new_active_referrals_count)),t(qa(ce.new_task_referrals_count))}catch(J){console.error("Error fetching referral counts:",J)}},re=async()=>{try{const J=await fetch("https://tg.catserver-production.com/offline_income/count-users-with-two-videos");if(!J.ok)throw new Error("Failed to fetch user video counts");const $=await J.json();t(Qa($.count))}catch(J){console.error("Error fetching user video counts:",J)}};se(),ie(),le(),re()}},[u,t]);const G=async(w,W,D,se,ie)=>{try{if(!(await fetch("https://tg.catserver-production.com/api/update_referal_income",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:w,income:D,currentLeagueTitle:W,balance:se,visibleBalance:ie})})).ok)throw new Error("Failed to update referral income")}catch(le){console.error("Error sending referral income:",le)}},Y=async(w,W)=>{try{if(!(await fetch("https://tg.catserver-production.com/api/update_active_status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:w,active:W})})).ok)throw new Error("Failed to update active status")}catch(D){console.error("Error sending active status:",D)}};a.useEffect(()=>{if(!S&&E){const w=_.findIndex(se=>k<se.cost),W=w===-1?_.length-1:w-1,D=_[W]||null;if(u!==null&&L!==D&&S){const se={userId:u,currentLeagueTitle:(D==null?void 0:D.title)||null,currentLeagueReferalIncome:(D==null?void 0:D.referalIncome)||null,visibleBalance:k,balance:b};G(se.userId,se.currentLeagueTitle,se.currentLeagueReferalIncome,se.balance,se.visibleBalance)}if(D)i(D);else{const se=_.reduce((ie,le)=>ie.cost>le.cost?ie:le);i(se)}k>1e3&&u!==null&&!r&&(Y(u,!0),n(!0))}},[k,_,u,L]);const V=M.find(w=>w.title==="MULTIPAW"),v=V?V.level:0,p=c(Re),z=c(Pt),I=()=>{if(!j)return;const{clickValue:w}=j.bonus||{clickValue:0};let W=v||0;w==="double"?W*=2:w==="triple"?W*=3:W+=w;let D=W;p&&(D*=4);const se=Math.ceil(D*.5+K);return{level:D,incrementValue:se}},l=()=>{const w=I();if(w){const{level:W,incrementValue:D}=w;t($t(W)),t(Za(D))}};a.useEffect(()=>{if(H>0||p&&z>0){let w=0,W=500,D=2;p&&(W=125,D=8);const se=setInterval(()=>{l(),w++,w%D===0&&(t(ja()),t(Na()))},W);return()=>{clearInterval(se)}}},[H,t,p,z]);const T=c(Ke),q=c(Ye),[A,te]=a.useState(Q.Raffle);a.useEffect(()=>{te(T!=="0"&&q?Q.TAP:Q.Raffle)},[T,q]);const ne=()=>A=="Raffle"?{backgroundImage:`url(${en})`}:{backgroundImage:`url(${tn})`};return e.jsxs(e.Fragment,{children:[!E&&e.jsx("div",{className:"fixed z-50 inset-0 flex items-center justify-center bg-black",children:e.jsx("img",{src:qe,alt:"Loading",className:"w-5/10"})}),E&&e.jsxs("div",{className:`w-screen h-screen bg-cover bg-center overflow-hidden 
                    flex flex-col max-w-md mx-auto gap-1 font-body transition-all duration-1000 ease-in-out bg-black`,style:{...ne(),backgroundSize:"cover",backgroundPosition:"center",width:"100vw",height:"100vh"},children:[e.jsx(vn,{}),e.jsxs(e.Fragment,{children:[A===Q.Raffle&&e.jsx(jn,{setActiveInterface:te}),A===Q.BOOST&&e.jsx(on,{setActiveInterface:te}),A===Q.TAP&&e.jsx(un,{setActiveInterface:te}),A===Q.TAP&&e.jsx(hn,{}),A===Q.MILK&&e.jsx(xn,{}),A===Q.LEAGUE_DETAILS&&e.jsx(yn,{}),A===Q.TASK&&e.jsx(gn,{setActiveInterface:te}),A===Q.REF&&e.jsx(bn,{}),!f&&A!=="Raffle"&&e.jsx(ln,{navigationInterface:ka,activeInterface:A,setActiveInterface:te})]})]})]})}export{Mn as A};
